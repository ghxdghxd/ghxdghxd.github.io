<div class="header">
  <h1 class="page-title">
    <a class="icon circle-icon glyphicon glyphicon-chevron-left trigger-message-close"></a>
    git的一般用法
  </h1>
  <div class="details">
    <div class="left">
      11月 03, 2016
      <span> | </span> <a href="/category/xiao-chao-su-cha.html">小抄速查</a>
    </div>
    <div class="right">
      <a class="fa fa-tag" href="/tag/git.html">git</a>
    </div>
  </div>
</div>
<div id="message-nano-wrapper" class="nano">
  <div class="nano-content">
    <ul class="message-container">
        <div class="message">
          <h1>Git用法</h1>
<h2>1 建立仓库</h2>
<ul>
<li>远程</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>git remote add origin git@github.com:ghxdghxd<span class="nv">$NAME</span>.git</span>
</pre></div>


<ul>
<li>本地(初始化)</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>git init</span>
</pre></div>


<h2>2 常用操作</h2>
<ul>
<li>拉取</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>git pull origin master</span>
</pre></div>


<ul>
<li>提交</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>git add *.py</span>
<span class="code-line">git commit -m <span class="s2">&quot;message&quot;</span></span>
<span class="code-line">git push origin master/dev/develop</span>
</pre></div>


<!--more-->

<ul>
<li>重命令与删除</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>git rm</span>
<span class="code-line">git mv</span>
</pre></div>


<h2>3 分支操作</h2>
<table>
<thead>
<tr>
<th align="center">主支</th>
<th align="center">修补</th>
<th align="center">发布</th>
<th align="center">开发</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">master</td>
<td align="center">hotfix</td>
<td align="center">release</td>
<td align="center">develop</td>
<td align="center">feature</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span class="code-line"><span></span>git branch  /-a/r       <span class="c1"># 查看本地/全部/远程分支</span></span>
<span class="code-line">git branch <span class="o">[</span>name<span class="o">]</span>       <span class="c1"># 建立分支</span></span>
<span class="code-line">git branch -d <span class="o">[</span>name<span class="o">]</span>    <span class="c1"># 删除本地分支</span></span>
<span class="code-line">git push origin --delete <span class="o">[</span>name<span class="o">]</span>         <span class="c1"># 删除远程分支</span></span>
<span class="code-line">git checkout -b <span class="o">[</span>name<span class="o">]</span> origin/develop   <span class="c1"># 建立并切换开发分支</span></span>
<span class="code-line">git checkout <span class="o">[</span>name<span class="o">]</span>                     <span class="c1"># 切换分支</span></span>
<span class="code-line">git merge --no-ff <span class="o">[</span>name<span class="o">]</span>                <span class="c1"># 合并分支</span></span>
<span class="code-line">git push origin dev:develop             <span class="c1"># 本地分支提交到远程</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="c1"># 删除远程分支后，本地未同步的问题</span></span>
<span class="code-line">git remote show origin      <span class="c1"># 可以查看remote地址，远程分支，还有本地分支与之相对应关系等信息</span></span>
<span class="code-line">git remote prune origin     <span class="c1"># 删除了那些远程仓库不存在的分支</span></span>
</pre></div>


<h2>push命令用于将本地分支的更新，推送到远程主机。</h2>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">&lt;</span><span class="err">远程主机名</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="err">本地分支名</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="err">远程分支名</span><span class="o">&gt;</span></span>
</pre></div>


<p>git pull类似:
    git pull &lt;远程分支&gt;:&lt;本地分支&gt;</p>
<p>注意，分支推送顺序的写法是&lt;来源地&gt;:&lt;目的地&gt;，
所以git pull是&lt;远程分支&gt;:&lt;本地分支&gt;，而git push是&lt;本地分支&gt;:&lt;远程分支&gt;。
如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支(通常两者同名)，如果该远程分支不存在，则会被新建。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span></span>
</pre></div>


<p>上面命令表示，将本地的master分支推送到origin主机的master分支。如果后者不存在，则会被新建。</p>
<p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="p">:</span><span class="n">master</span></span>
</pre></div>


<p>等同于</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="c1">--delete master</span></span>
</pre></div>


<p>上面命令表示删除origin主机的master分支。</p>
<p>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span></span>
</pre></div>


<p>上面命令表示，将当前分支推送到origin主机的对应分支。</p>
<p>如果当前分支只有一个追踪分支，那么主机名都可以省略。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span></span>
</pre></div>


<p>如果当前分支与多个主机存在追踪关系，则可以使用-u选项指定一个默认主机，这样后面就可以不加任何参数使用git push。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">-</span><span class="n">u</span> <span class="n">origin</span> <span class="n">master</span></span>
</pre></div>


<p>上面命令将本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用git push了。</p>
<p>不带任何参数的git push，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git 2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用git config命令。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">config</span> <span class="c1">--global push.default matching</span></span>
</pre></div>


<p>或者</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">config</span> <span class="c1">--global push.default simple</span></span>
</pre></div>


<p>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用–all选项。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="c1">--all origin</span></span>
</pre></div>


<p>上面命令表示，将所有本地分支都推送到origin主机。</p>
<p>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做git pull合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用–force选项。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="c1">--force origin</span></span>
</pre></div>


<p>上面命令使用–force选项，结果导致在远程主机产生一个”非直进式”的合并(non-fast-forward merge)。除非你很确定要这样做，否则应该尽量避免使用–force选项。</p>
<p>最后，git push不会推送标签(tag)，除非使用–tags选项。</p>
<div class="highlight"><pre><span class="code-line"><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="c1">--tags</span></span>
</pre></div>


<h2>中文乱码</h2>
<div class="highlight"><pre><span class="code-line"><span></span>git config --global core.quotepath <span class="nb">false</span></span>
</pre></div>


<p>core.quotepath设为false的话，就不会对0x80以上的字符进行quote。中文显示正常。</p>
<h2>gitignore忽略文件</h2>
<p>1、配置语法：</p>
<p>以斜杠“/”开头表示目录；</p>
<p>以星号“*”通配多个字符；</p>
<p>以问号“?”通配单个字符</p>
<p>以方括号“[]”包含单个字符的匹配列表；</p>
<p>以叹号“!”表示不忽略(跟踪)匹配到的文件或目录；</p>
<p>此外，git 对于 .ignore 配置文件是按行从上到下进行规则匹配的，意味着如果前面的规则匹配的范围更大，则后面的规则将不会生效；</p>
<p>2、示例：</p>
<p>（1）规则：fd1/*
　　　　  说明：忽略目录 fd1 下的全部内容；注意，不管是根目录下的 /fd1/ 目录，还是某个子目录 /child/fd1/ 目录，都会被忽略；</p>
<p>（2）规则：/fd1/*
　　　　  说明：忽略根目录下的 /fd1/ 目录的全部内容；</p>
<p>（3）规则：</p>
<p>/*
!.gitignore
!/fw/bin/
!/fw/sf/</p>
<p>说明：忽略全部内容，但是不忽略 .gitignore 文件、根目录下的 /fw/bin/ 和 /fw/sf/ 目录；</p>
<h2>warning: LF will be replaced by CRLF</h2>
<p>在Windows环境下使用git进行add的时候，会提示如下warning: “warning:LF will be replacee by CRLF”。</p>
<p>这是因为在Windows中的换行符为CRLF，而在Linux中的换行符为LF。
在git创建的项目中换行符为LF，而执行git add时，系统会提示LF将被转换为CRLF。
解决的办法很简单，禁止git的自动转换即可。</p>
<div class="highlight"><pre><span class="code-line"><span></span>git config --global core.autocrlf <span class="nb">false</span> //禁用自动转换</span>
</pre></div>
        </div>
        <!-- <div class="tool-box">
          <a href="#" class="circle-icon small glyphicon glyphicon-share-alt"></a>
          <a href="#" class="circle-icon small red-hover glyphicon glyphicon-remove"></a>
          <a href="#" class="circle-icon small red-hover glyphicon glyphicon-flag"></a>
        </div> -->
    </ul>
  </div>
</div>

<script>
  $('.nano').overlayScrollbars({
    scrollbars: {
      autoHide: "leave",
    }
  });
  $('.trigger-message-close').on('click', function () {
    $('body').removeClass('show-message');
    $('#main .message-list li').removeClass('active');
    messageIsOpen = false;
    $('body').removeClass('show-main-overlay');
  });
  $('#message .header .left a').on('click', function (e) {
    e.preventDefault();
    helper.setQuery().clearRefinements().addDisjunctiveFacetRefinement("category", e.target.text).search();
    
  });
  $('#message .header .right a').on('click', function (e) {
    e.preventDefault();
    helper.setQuery().clearRefinements().addFacetRefinement("tags", e.target.text).search();
  });
</script>