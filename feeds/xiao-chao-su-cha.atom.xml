<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>iKnowledgeBase - 小抄速查</title><link href="https://ghxdghxd.github.io/" rel="alternate"></link><link href="https://ghxdghxd.github.io/feeds/xiao-chao-su-cha.atom.xml" rel="self"></link><id>https://ghxdghxd.github.io/</id><updated>2018-12-18T22:30:24+08:00</updated><entry><title>libatk</title><link href="https://ghxdghxd.github.io/libatk.html" rel="alternate"></link><published>2018-11-05T12:23:52+08:00</published><updated>2018-11-05T12:23:52+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2018-11-05:/libatk.html</id><summary type="html">&lt;p&gt;/usr/lib/x86_64-linux-gnu/libatk-1.0.so.0: undefined symbol: g_log_structured_standard&lt;/p&gt;</summary><content type="html">&lt;h1&gt;/usr/lib/x86_64-linux-gnu/libatk-1.0.so.0: undefined symbol: g_log_structured_standard&lt;/h1&gt;
&lt;h2&gt;来源&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Rstudio visNetwork导出html动态图&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;解决&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# ubuntu&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;apt install libatk1.0-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="error"></category><category term="libatk"></category></entry><entry><title>gitlab的安装与配置</title><link href="https://ghxdghxd.github.io/gitlab.html" rel="alternate"></link><published>2018-10-20T11:20:00+08:00</published><updated>2018-10-26T15:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2018-10-20:/gitlab.html</id><summary type="html">&lt;p&gt;centos6 搭建私有git服务器&lt;/p&gt;</summary><content type="html">&lt;h1&gt;安装gitlab&lt;/h1&gt;
&lt;h2&gt;添加源到/etc/yum.repos.d/gitlab-ce.repo&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[gitlab-ce]&lt;/span&gt;
&lt;span class="code-line"&gt;name=Gitlab CE Repository&lt;/span&gt;
&lt;span class="code-line"&gt;baseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6&lt;/span&gt;
&lt;span class="code-line"&gt;gpgcheck=0&lt;/span&gt;
&lt;span class="code-line"&gt;enabled=1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;yum安装&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;yum install gitlab-ce&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;配置gitlab&lt;/h1&gt;
&lt;h2&gt;目录&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/etc/gitlab/ ## 放置配置文件&lt;/span&gt;
&lt;span class="code-line"&gt;/opt/gitlab/ ## 主目录&lt;/span&gt;
&lt;span class="code-line"&gt;/var/opt/gitlab/ ## 各个组件&lt;/span&gt;
&lt;span class="code-line"&gt;/var/log/gitlab/ ## 放置日志文件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;设置IP地址&lt;/h2&gt;
&lt;h3&gt;http配置&lt;/h3&gt;
&lt;p&gt;修改/etc/gitlab/gitlab.rb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#修改ip地址，**iptables 打开port**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;external_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://xxx.xxx.xxx.xx:port&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改完成后，如果打开 "http:\/\/IP" 无法访问gitlab，可能是80端口冲突
原因：Nginx默认使用了80端口。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决&lt;/strong&gt;：修改Apache的端口,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/etc/httpd/conf/httpd.conf，&lt;/span&gt;
&lt;span class="code-line"&gt;Listen &lt;span class="m"&gt;8111&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service httpd restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;https配置&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;使用自签名证书开启Https&lt;/p&gt;
&lt;p&gt;证书目录/etc/gitlab/ssl, openssl创建证书&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修改/etc/gitlab/gitlab.rb&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#修改ip地址，**iptables 打开port**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;external_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;https://xxx.xxx.xxx.xx&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# gitlab 网站https：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;nginx&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redirect_http_to_https&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# gitlab ci 网站https：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;ci_nginx&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;redirect_http_to_https&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;nginx&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ssl_certificate&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/etc/gitlab/ssl/xxx.xxx.xxx.xx.crt&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;nginx&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ssl_certificate_key&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/etc/gitlab/ssl/xxx.xxx.xxx.xx.key&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo cp /etc/gitlab/ssl/*crt /etc/gitlab/trusted-certs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;修改ssh端口&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;gitlab_rails[&amp;#39;gitlab_shell_ssh_port&amp;#39;] = 21386&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;修改gitlab存储目录&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;默认存储位置在/var/opt/gitlab/git-data/repositories，修改/etc/gitlab/gitlab.rb&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git_data_dirs({&lt;/span&gt;
&lt;span class="code-line"&gt;    &amp;quot;default&amp;quot; =&amp;gt; {&lt;/span&gt;
&lt;span class="code-line"&gt;      &amp;quot;path&amp;quot; =&amp;gt; &amp;quot;/usr/data/gitlab&amp;quot;&lt;/span&gt;
&lt;span class="code-line"&gt;     }&lt;/span&gt;
&lt;span class="code-line"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;开启gitlab-pages&lt;/h2&gt;
&lt;p&gt;修改/etc/gitlab/gitlab.rb&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;pages_external_url &amp;quot;https://gitlab&amp;quot;&lt;/span&gt;
&lt;span class="code-line"&gt;gitlab_pages[&amp;#39;enable&amp;#39;] = true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gitlab占内存过多&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#减少进程数,最小2&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;unicorn&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_processes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;4&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#减少数据库缓存,最大14GB，总内存 256M*5&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;shared_buffers&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;256M&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#减少数据库并发数,默认8&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;postgresql&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;max_worker_processes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#减少sidekiq并发数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sidekiq&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;concurrency&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;25&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;nginx&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;worker_processes&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;gitlab 的权限&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;Guest&lt;/th&gt;
&lt;th&gt;Reporter&lt;/th&gt;
&lt;th&gt;Developer&lt;/th&gt;
&lt;th&gt;Master&lt;/th&gt;
&lt;th&gt;Owner&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Create new issues&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Leave comments&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pull the project code&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Download a project&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Create code snippets&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Create new merge requests&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Push changes to nonprotected branches&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Remove nonprotected branches&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Add tags&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Write a wiki&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Manage the issue tracker&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Add new team members&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Push changes to protected branches&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Manage the branch protection&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Manage Git tags&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Edit the project&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Add deploy keys to the project&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Configure the project hooks&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;/opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo gitlab-ctl start    &lt;span class="c1"&gt;# 启动所有 gitlab 组件；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo gitlab-ctl stop        &lt;span class="c1"&gt;# 停止所有 gitlab 组件；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo gitlab-ctl restart        &lt;span class="c1"&gt;# 重启所有 gitlab 组件；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo gitlab-ctl status        &lt;span class="c1"&gt;# 查看服务状态；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo vim /etc/gitlab/gitlab.rb        &lt;span class="c1"&gt;# 修改默认的配置文件；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;gitlab-rake gitlab:check &lt;span class="nv"&gt;SANITIZE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; --trace    &lt;span class="c1"&gt;# 检查gitlab；&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo gitlab-ctl tail        &lt;span class="c1"&gt;# 查看日志；&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="gitlab"></category></entry><entry><title>git submodule的用法</title><link href="https://ghxdghxd.github.io/git-submodule.html" rel="alternate"></link><published>2018-02-03T10:20:00+08:00</published><updated>2018-02-03T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2018-02-03:/git-submodule.html</id><summary type="html">&lt;p&gt;参考 http://www.cnblogs.com/nicksheng/p/6201711.html， 用于项目 中的 项目&lt;/p&gt;</summary><content type="html">&lt;h1&gt;常用命令&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git clone &amp;lt;repository&amp;gt; --recursive &lt;span class="c1"&gt;#递归的方式克隆整个项目&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule add projectB.git projectB &lt;span class="c1"&gt;#添加子模块&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule init &lt;span class="c1"&gt;#初始化子模块&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule update &lt;span class="c1"&gt;#更新子模块&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule foreach git pull &lt;span class="c1"&gt;#拉取所有子模块&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;如何使用&lt;/h2&gt;
&lt;h3&gt;1. 创建带子模块的版本库&lt;/h3&gt;
&lt;p&gt;例如我们要创建如下结构的项目&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;project&lt;/span&gt;
&lt;span class="code-line"&gt;    |--moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;    |--readme.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;创建project版本库，并提交readme.txt文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git init --bare project.git&lt;/span&gt;
&lt;span class="code-line"&gt;git clone project.git project1cd project1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;This is a project.&amp;quot;&lt;/span&gt; &amp;gt; readme.txt&lt;/span&gt;
&lt;span class="code-line"&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;add readme.txt&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;p&gt;创建moduleA版本库，并提交a.txt文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git init --bare moduleA.git&lt;/span&gt;
&lt;span class="code-line"&gt;git clone moduleA.git moduleA1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; moduleA1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;This is a submodule.&amp;quot;&lt;/span&gt; &amp;gt; a.txt&lt;/span&gt;
&lt;span class="code-line"&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;add a.txt&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在project项目中引入子模块moduleA，并提交子模块信息&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; project1&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule add ../moduleA.git moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;git status&lt;/span&gt;
&lt;span class="code-line"&gt;git diff&lt;/span&gt;
&lt;span class="code-line"&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;add submodule&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;使用git status可以看到多了两个需要提交的文件，其中.gitmodules指定submodule的主要信息，包括子模块的路径和地址信息，moduleA指定了子模块的commit id，使用git diff可以看到这两项的内容。这里需要指出父项目的git并不会记录submodule的文件变动，它是按照commit id指定submodule的git header，所以.gitmodules和moduleA这两项是需要提交到父项目的远程仓库的。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;On branch master&lt;/span&gt;
&lt;span class="code-line"&gt;Your branch is up-to-datewith&lt;span class="s1"&gt;&amp;#39;origin/master&amp;#39;&lt;/span&gt;.&lt;/span&gt;
&lt;span class="code-line"&gt;Changes to be committed:  &lt;span class="o"&gt;(&lt;/span&gt;use &lt;span class="s2"&gt;&amp;quot;git reset HEAD ...&amp;quot;&lt;/span&gt;to unstage&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    new file:   .gitmodules&lt;/span&gt;
&lt;span class="code-line"&gt;    new file:   moduleA&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. 克隆带子模块的版本库&lt;/h3&gt;
&lt;p&gt;方法一，先clone父项目，再初始化submodule，最后更新submodule，初始化只需要做一次，之后每次只需要直接update就可以了，需要注意submodule默认是不在任何分支上的，它指向父项目存储的submodule commit id。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git clone project.git project2&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; project2&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule init&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule update&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;方法二，采用递归参数--recursive，需要注意同样submodule默认是不在任何分支上的，它指向父项目存储的submodule commit id。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git clone project.git project3 --recursive&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule update --init --recursive&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3. 修改子模块&lt;/h3&gt;
&lt;p&gt;修改子模块之后只对子模块的版本库产生影响，对父项目的版本库不会产生任何影响，如果父项目需要用到最新的子模块代码，我们需要更新父项目中submodule commit id，默认的我们使用git status就可以看到父项目中submodule commit id已经改变了，我们只需要再次提交就可以了。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; project1/moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;git branch&lt;/span&gt;
&lt;span class="code-line"&gt;echo&lt;span class="s2"&gt;&amp;quot;This is a submodule.&amp;quot;&lt;/span&gt; &amp;gt; b.txt&lt;/span&gt;
&lt;span class="code-line"&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;add b.txt&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;span class="code-line"&gt;git status&lt;/span&gt;
&lt;span class="code-line"&gt;git diff&lt;/span&gt;
&lt;span class="code-line"&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;update submodule add b.txt&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4. 更新子模块&lt;/h3&gt;
&lt;p&gt;更新子模块的时候要注意子模块的分支默认不是master。
方法一，先pull父项目，然后执行&lt;code&gt;git submodule update&lt;/code&gt;，注意moduleA的分支始终不是master。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; project2&lt;/span&gt;
&lt;span class="code-line"&gt;git pull&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule update&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;方法二，先进入子模块，然后切换到需要的分支，这里是master分支，然后对子模块pull，这种方法会改变子模块的分支。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; project3/moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;git checkout master&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;span class="code-line"&gt;git submodule foreach git pull&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ..&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;5. 删除子模块&lt;/h3&gt;
&lt;p&gt;网上有好多用的是下面这种方法&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git rm --cached moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;rm -rf moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;rm .gitmodules&lt;/span&gt;
&lt;span class="code-line"&gt;vim .git/config&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;删除submodule相关的内容，例如下面的内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;submodule &lt;span class="s2"&gt;&amp;quot;moduleA&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;      &lt;span class="nv"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /Users/nick/dev/nick-doc/testGitSubmodule/moduleA.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后提交到远程服务器&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git add .&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m&lt;span class="s2"&gt;&amp;quot;remove submodule&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是我自己本地实验的时候，发现用下面的方式也可以，服务器记录的是.gitmodules和moduleA，本地只要用git的删除命令删除moduleA，再用git status查看状态就会发现.gitmodules和moduleA这两项都已经改变了，至于.git/config，仍会记录submodule信息，但是本地使用也没发现有什么影响，如果重新从服务器克隆则.git/config中不会有submodule信息。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git rm moduleA&lt;/span&gt;
&lt;span class="code-line"&gt;git status&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m&lt;span class="s2"&gt;&amp;quot;remove submodule&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="git"></category><category term="submodule"></category></entry><entry><title>archlinux安装与配置</title><link href="https://ghxdghxd.github.io/archlinux.html" rel="alternate"></link><published>2017-12-03T10:20:00+08:00</published><updated>2017-12-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2017-12-03:/archlinux.html</id><summary type="html">&lt;p&gt;archlinux的简单安装与配置&lt;/p&gt;</summary><content type="html">&lt;h1&gt;archlinux安装&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# u盘启动后&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 连接网络&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;wifi-memu&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/sda1 /mnt&lt;/span&gt;
&lt;span class="code-line"&gt;mkdir -p /mnt/home&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/sda2 /mnt/home&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 修改中国镜像源,如163.com&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;vi /ect/pacman.d/mirrorlist&lt;/span&gt;
&lt;span class="code-line"&gt;pacstrap -i /mnt base base-devel&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#生成挂载文件fstab&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;genfstab -U /mnt &amp;gt;&amp;gt; /mnt/etc/fstab&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;archlinux 初步配置&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#切换到archlinux&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;arch-chroot /mnt /bin/bash&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;本地语言&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;vi /etc/locale.gen&lt;/span&gt;
&lt;span class="code-line"&gt;    en_US.UTF-8 UTF-8&lt;/span&gt;
&lt;span class="code-line"&gt;    zh_CN.UTF-8 UTF-8&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#生效&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;locale-gen&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8 &amp;gt; /etc/locale.conf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;ul&gt;
&lt;li&gt;时区&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 或&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 按提示选择时区&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;tzselect&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#设置硬件时间&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;hwclock --systohc --utc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;grub引导系统&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 支持grub和EFI，可只选grup&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S grub efibootmgr&lt;/span&gt;
&lt;span class="code-line"&gt;grub-install --target&lt;span class="o"&gt;=&lt;/span&gt;i386-pc --recheck --debug /dev/sda&lt;/span&gt;
&lt;span class="code-line"&gt;grup-mkconfig -o /boot/grub/grub.cfg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;主机名&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; Garch &amp;gt;&amp;gt; /etc/hostname&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;网络配置&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 有线&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; dhcpcd.service&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 无线&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S iw wpa_supplicant dialog&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;archlinux 配置&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 最小安装&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# X桌面&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S xorg-server&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 显卡驱动&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S xf86-video-ati&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S gnome gnome-tweak-tool&lt;/span&gt;
&lt;span class="code-line"&gt;pacman -S ttf-ubuntu&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 可选&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category></entry><entry><title>docker安装与配置</title><link href="https://ghxdghxd.github.io/docker.html" rel="alternate"></link><published>2017-11-03T10:20:00+08:00</published><updated>2017-11-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2017-11-03:/docker.html</id><summary type="html">&lt;p&gt;docker的简单安装与配置&lt;/p&gt;</summary><content type="html">&lt;h1&gt;docker&lt;/h1&gt;
&lt;h2&gt;centos yum install docker&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;tee /etc/yum.repos.d/docker.repo &lt;span class="s"&gt;&amp;lt;&amp;lt;-&amp;#39;EOF&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;[dockerrepo]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;name=Docker Repository&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;enabled=1&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;gpgcheck=1&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;gpgkey=https://yum.dockerproject.org/gpg&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s"&gt;EOF&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sed -i &lt;span class="s1"&gt;&amp;#39;s/other_args=\&amp;quot;\&amp;quot;/other_args=\&amp;quot;--graph=\/share\/apps\/docker\&amp;quot;/g&amp;#39;&lt;/span&gt; /etc/sysconfig/docker&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="sb"&gt;`&lt;/span&gt;seq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;do&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    sudo scp /etc/yum.repos.d/docker.repo compute-0-&lt;span class="nv"&gt;$i&lt;/span&gt;:/etc/yum.repos.d/docker.repo&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;done&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;rocks run host &lt;span class="s2"&gt;&amp;quot;yum install docker-engine&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;rocks run host &lt;span class="s2"&gt;&amp;quot;sed -i &amp;#39;s/other_args=\&amp;quot;\&amp;quot;/other_args=\&amp;quot;--graph=\/share\/apps\/docker\&amp;quot;/g&amp;#39; /etc/sysconfig/docker&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;h2&gt;手动安装&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 手动安装centos6.5 一些需要安装&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;yum remove docker-engine&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /share/apps/until/docker/&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./lua-filesystem-1.4.2-1.el6.x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./lxc-libs-1.0.11-1.el6.x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./lua-lxc-1.0.11-1.el6.x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./lua-alt-getopt-0.7.0-1.el6.noarch.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./lxc-1.0.11-1.el6.x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum install ./docker-io-1.7.1-2.el6.x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo&lt;/span&gt;
&lt;span class="code-line"&gt;yum install device-mapper-event-libs&lt;/span&gt;
&lt;span class="code-line"&gt;service docker restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装错误&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 下面错误：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/usr/bin/docker: relocation error: /usr/bin/docker: symbol dm_task_get_info_with_deferred_remove, version Base not defined in file libdevmapper.so.1.02 with link &lt;span class="nb"&gt;time&lt;/span&gt; reference&lt;/span&gt;
&lt;span class="code-line"&gt;fix: $ sudo yum install device-mapper-event-libs&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 如果无法安装，重新更新&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 然后再安装&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;docker应用&lt;/h2&gt;
&lt;h3&gt;启动docker&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;service docker start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;添加用户&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 添加docker group：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo groupadd docker&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 将当前用户添加到docker组：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo gpasswd -a &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;USER&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; docker&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 重启docker服务：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo service docker restart&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 开机启动&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;chkconfig docker on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;修改镜像和容器的存放路径&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# /etc/sysconfig/docker加入：&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;other_args&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--graph=/data/docker&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 停止Docker服务&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service docker stop&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 备份数据到新的存放路径&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cp -rf /var/lib/docker /data/&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 修改备份/var/lib/docker路径&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;mv /var/lib/docker&lt;span class="o"&gt;{&lt;/span&gt;,.bak&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 启动Docker服务&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service docker start&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 测试Docker服务&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;docker info&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;用法&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;查看镜像 docker images&lt;/li&gt;
&lt;li&gt;查找镜像 docker search&lt;/li&gt;
&lt;li&gt;查看容器 docker ps -a&lt;/li&gt;
&lt;li&gt;运行容器 docker run&lt;/li&gt;
&lt;li&gt;将宿主机的/var/data挂载到容器中的/data: docker run -tdi -v /var/data:/data centos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果ls: cannot open directory '.': Permission denied
修改/etc/sysconfig/docker，OPTIONS去掉--selinux-enabled&lt;/p&gt;</content><category term="docker"></category></entry><entry><title>预防SSH服务器暴力破解</title><link href="https://ghxdghxd.github.io/fail2ban.html" rel="alternate"></link><published>2017-03-05T11:19:47+08:00</published><updated>2017-03-05T11:19:47+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2017-03-05:/fail2ban.html</id><summary type="html">&lt;p&gt;fail2ban 防御 SSH 服务器的暴力破解攻击&lt;/p&gt;</summary><content type="html">&lt;h1&gt;原因&lt;/h1&gt;
&lt;p&gt;前两天，以及更早的一段时间内，很多人抱怨，远程登录服务器时经常断线，严重到秒退。
起初，以为是SSH配置问题，浪费大量时间对SSH检查，重装，配置...
然后，查看/var/log/secure登录日志，发现多个IP的进攻，
所以，安装fail2ban防御
以下，抄自网络...&lt;/p&gt;
&lt;h1&gt;fail2ban 防御 SSH 服务器的暴力破解攻击&lt;/h1&gt;
&lt;p&gt;对于SSH服务的常见的攻击就是暴力破解攻击——远程攻击者通过不同的密码来无限次地进行登录尝试。当然SSH可以设置使用非密码验证验证方式来对抗这种攻击，例如&lt;a href="http://xmodulo.com/how-to-force-ssh-login-via-public-key-authentication.html"&gt;公钥验证&lt;/a&gt;或者&lt;a href="http://linux.cn/article-3725-1.html"&gt;双重验证&lt;/a&gt;。将不同的验证方法的优劣处先放在一边，如果我们必须使用密码验证方式怎么办？你是如何保护你的SSH 服务器免遭暴力破解攻击的呢？&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.fail2ban.org/"&gt;fail2ban&lt;/a&gt; 是 Linux上的一个著名的入侵保护的开源框架，它会监控多个系统的日志文件（例如：/var/log/auth.log 或者/var/log/secure）并根据检测到的任何可疑的行为自动触发不同的防御动作。事实上，fail2ban 在防御对SSH服务器的暴力密码破解上非常有用。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/fail2ban/fail2ban.git&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; fail2ban&lt;/span&gt;
&lt;span class="code-line"&gt;python3 setup.py install&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cp files/debian-initd /etc/init.d/fail2ban&lt;/span&gt;
&lt;span class="code-line"&gt;update-rc.d fail2ban defaults&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cp files/redhat-initd /etc/init.d/fail2ban&lt;/span&gt;
&lt;span class="code-line"&gt;chkconfig fail2ban on&lt;/span&gt;
&lt;span class="code-line"&gt;service fail2ban start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;为SSH服务器配置Fail2ban&lt;/h2&gt;
&lt;p&gt;编辑其配置文件 /etc/fail2ban/jail.conf。
在配置文件的“[DEFAULT]”区，你可以在此定义所有受监控的服务的默认参数，另外在特定服务的配置部分，你可以为每个服务（例如SSH，Apache等）设置特定的配置来覆盖默认的参数配置。&lt;/p&gt;
&lt;p&gt;在针对服务的监狱区（在[DEFAULT]区后面的地方），你需要定义一个[ssh-
iptables]区，这里用来定义SSH相关的监狱配置。真正的禁止IP地址的操作是通过iptables完成的。&lt;/p&gt;
&lt;p&gt;下面是一个包含“ssh-iptables”监狱配置的/etc/fail2ban/jail.conf的文件样例。当然根据你的需要，你也可以指定其他的应用监狱。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;$ sudo vi /etc/fail2ban/jail.local&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;1&lt;/span&gt;. &lt;span class="o"&gt;[&lt;/span&gt;DEFAULT&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;2&lt;/span&gt;. &lt;span class="c1"&gt;# 以空格分隔的列表，可以是 IP 地址、CIDR 前缀或者 DNS 主机名&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;3&lt;/span&gt;. &lt;span class="c1"&gt;# 用于指定哪些地址可以忽略 fail2ban 防御&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;4&lt;/span&gt;. &lt;span class="nv"&gt;ignoreip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1 &lt;span class="m"&gt;172&lt;/span&gt;.31.0.0/24 &lt;span class="m"&gt;10&lt;/span&gt;.10.0.0/24 &lt;span class="m"&gt;192&lt;/span&gt;.168.0.0/24&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;5&lt;/span&gt;.  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;6&lt;/span&gt;. &lt;span class="c1"&gt;# 客户端主机被禁止的时长（秒）&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;7&lt;/span&gt;. &lt;span class="nv"&gt;bantime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;86400&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;8&lt;/span&gt;.  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;9&lt;/span&gt;. &lt;span class="c1"&gt;# 客户端主机被禁止前允许失败的次数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;10&lt;/span&gt;. &lt;span class="nv"&gt;maxretry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;5&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;11&lt;/span&gt;.  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;12&lt;/span&gt;. &lt;span class="c1"&gt;# 查找失败次数的时长（秒）&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;13&lt;/span&gt;. &lt;span class="nv"&gt;findtime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;600&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;14&lt;/span&gt;.  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;15&lt;/span&gt;. &lt;span class="nv"&gt;mta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; sendmail&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;16&lt;/span&gt;.  &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;17&lt;/span&gt;. &lt;span class="o"&gt;[&lt;/span&gt;ssh-iptables&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;18&lt;/span&gt;. &lt;span class="nv"&gt;enabled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;19&lt;/span&gt;. &lt;span class="nv"&gt;filter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; sshd&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;20&lt;/span&gt;. &lt;span class="nv"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; iptables&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;SSH, &lt;span class="nv"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ssh, &lt;span class="nv"&gt;protocol&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;tcp&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;21&lt;/span&gt;. sendmail-whois&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;SSH, &lt;span class="nv"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your@email.com, &lt;span class="nv"&gt;sender&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;fail2ban@email.com&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;22&lt;/span&gt;. &lt;span class="c1"&gt;# Debian 系的发行版&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;23&lt;/span&gt;. &lt;span class="nv"&gt;logpath&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /var/log/auth.log&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;24&lt;/span&gt;. &lt;span class="c1"&gt;# Red Hat 系的发行版&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;25&lt;/span&gt;. &lt;span class="nv"&gt;logpath&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /var/log/secure&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;26&lt;/span&gt;. &lt;span class="c1"&gt;# ssh 服务的最大尝试次数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;27&lt;/span&gt;. &lt;span class="nv"&gt;maxretry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;根据上述配置，fail2ban会自动禁止在最近10分钟内有超过3次访问尝试失败的任意IP地址。一旦被禁，这个IP地址将会在24小时内一直被禁止访问 SSH
服务。这个事件也会通过sendemail发送邮件通知。
一旦配置文件准备就绪，按照以下方式重启fail2ban服务。
在 Debian, Ubuntu 或 CentOS/RHEL 6:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo service fail2ban restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在 Fedora 或 CentOS/RHEL 7:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo systemctl restart fail2ban&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为了验证fail2ban成功运行，使用参数'ping'来运行fail2ban-client 命令。
如果fail2ban服务正常运行，你可以看到“pong（嘭）”作为响应。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  1. $ sudo fail2ban-client ping&lt;/span&gt;
&lt;span class="code-line"&gt;  2. Server replied: pong&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;测试 fail2ban 保护SSH免遭暴力破解攻击&lt;/h2&gt;
&lt;p&gt;为了测试fail2ban是否能正常工作，尝试通过使用错误的密码来用SSH连接到服务器模拟一个暴力破解攻击。与此同时，监控
/var/log/fail2ban.log，该文件记录在fail2ban中发生的任何敏感事件。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  1. $ sudo tail -f /var/log/fail2ban.log&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;根据上述的日志文件，Fail2ban通过检测IP地址的多次失败登录尝试，禁止了一个IP地址192.168.1.8。&lt;/p&gt;
&lt;h3&gt;检查fail2ban状态并解禁被锁住的IP地址&lt;/h3&gt;
&lt;p&gt;由于fail2ban的“ssh-iptables”监狱使用iptables来阻塞问题IP地址，你可以通过以下方式来检测当前iptables来验证禁止规则。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  1. $ sudo iptables --list -n&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  1. Chain INPUT (policy ACCEPT)&lt;/span&gt;
&lt;span class="code-line"&gt;  2. target     prot opt source               destination&lt;/span&gt;
&lt;span class="code-line"&gt;  3. fail2ban-SSH  tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:22&lt;/span&gt;
&lt;span class="code-line"&gt;  4.  &lt;/span&gt;
&lt;span class="code-line"&gt;  5. Chain FORWARD (policy ACCEPT)&lt;/span&gt;
&lt;span class="code-line"&gt;  6. target     prot opt source               destination&lt;/span&gt;
&lt;span class="code-line"&gt;  7.  &lt;/span&gt;
&lt;span class="code-line"&gt;  8. Chain OUTPUT (policy ACCEPT)&lt;/span&gt;
&lt;span class="code-line"&gt;  9. target     prot opt source               destination&lt;/span&gt;
&lt;span class="code-line"&gt;  10.  &lt;/span&gt;
&lt;span class="code-line"&gt;  11. Chain fail2ban-SSH (1 references)&lt;/span&gt;
&lt;span class="code-line"&gt;  12. target     prot opt source               destination&lt;/span&gt;
&lt;span class="code-line"&gt;  13. DROP       all  --  192.168.1.8          0.0.0.0/0&lt;/span&gt;
&lt;span class="code-line"&gt;  14. RETURN     all  --  0.0.0.0/0            0.0.0.0/0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果你想要从fail2ban中解锁某个IP地址，你可以使用iptables命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo iptables -D fail2ban-SSH -s 192.168.1.8 -j DROP&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;当然你可以使用上述的iptables命令手动地检验和管理fail2ban的IP阻塞列表，但实际上有一个适当的方法就是使用fail2ban-
client命令行工具。这个命令不仅允许你对"ssh-iptables"监狱进行管理，同时也是一个标准的命令行接口，可以管理其他类型的fail2ban监狱。&lt;/p&gt;
&lt;p&gt;为了检验fail2ban状态（会显示出当前活动的监狱列表）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo fail2ban-client status&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;为了检验一个特定监狱的状态（例如ssh-iptables):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo fail2ban-client status ssh-iptables&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面的命令会显示出被禁止IP地址列表。&lt;/p&gt;
&lt;p&gt;为了解锁特定的IP地址：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo fail2ban-client set ssh-iptables unbanip 192.168.1.8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注意，如果你停止了Fail2ban 服务，那么所有的IP地址都会被解锁。当你重启 Fail2ban，它会从/etc/log/secure(或
/var/log/auth.log)中找到异常的IP地址列表，如果这些异常地址的发生时间仍然在禁止时间内，那么Fail2ban会重新将这些IP地址禁止。&lt;/p&gt;
&lt;h2&gt;设置 Fail2ban 自动启动&lt;/h2&gt;
&lt;p&gt;一旦你成功地测试了fail2ban之后，最后一个步骤就是在你的服务器上让其在开机时自动启动。在基于Debian的发行版中，fail2ban已经默认让自动启动生效。在基于Red-
Hat的发行版中，按照下面的方式让自动启动生效。&lt;/p&gt;
&lt;p&gt;在 CentOS/RHEL 6中:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo chkconfig fail2ban on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;在 Fedora 或 CentOS/RHEL 7:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;  sudo systemctl enable fail2ban&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="fail2ban"></category><category term="linux"></category></entry><entry><title>CPU信息</title><link href="https://ghxdghxd.github.io/cpuinfo.html" rel="alternate"></link><published>2017-03-01T09:19:22+08:00</published><updated>2018-12-01T11:01:47+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2017-03-01:/cpuinfo.html</id><summary type="html">&lt;p&gt;Linux中CPU info简介&lt;/p&gt;</summary><content type="html">&lt;h1&gt;CPU的结构&lt;/h1&gt;
&lt;p&gt;&lt;img alt="Fig.1" src="images/cpu.png" style="height:30%; width:30%;" /&gt;&lt;/p&gt;
&lt;h1&gt;CPU相关信息&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;lscpu&lt;/code&gt;从sysfs和/proc/cpuinfo收集cpu体系结构信息&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;Architecture:          x86_64               &lt;span class="c1"&gt;# 架构&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;CPU op-mode&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:        &lt;span class="m"&gt;32&lt;/span&gt;-bit, &lt;span class="m"&gt;64&lt;/span&gt;-bit       &lt;span class="c1"&gt;# CPU 运行模式&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Byte Order:            Little Endian        &lt;span class="c1"&gt;# 字节序&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:                &lt;span class="m"&gt;64&lt;/span&gt;                   &lt;span class="c1"&gt;# 逻辑CPU数(线程数) = 物理cpu(physical id)数量 * cpu内核(core id)数 * 单核多线程(thread, 如果支持并开启HT)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;On-line CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt; list:   &lt;span class="m"&gt;0&lt;/span&gt;-63                 &lt;span class="c1"&gt;# 在线CPU列表id&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Thread&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt; per core:    &lt;span class="m"&gt;2&lt;/span&gt;                    &lt;span class="c1"&gt;# 每个核心线程数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Core&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt; per socket:    &lt;span class="m"&gt;8&lt;/span&gt;                    &lt;span class="c1"&gt;# 每个cpu插槽的核数==每颗物理cpu核数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Socket&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:             &lt;span class="m"&gt;4&lt;/span&gt;                    &lt;span class="c1"&gt;# cpu插槽数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;NUMA node&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:          &lt;span class="m"&gt;4&lt;/span&gt;                    &lt;span class="c1"&gt;# NUMA节点数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Vendor ID:             GenuineIntel         &lt;span class="c1"&gt;# cpu品牌&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;CPU family:            &lt;span class="m"&gt;6&lt;/span&gt;                    &lt;span class="c1"&gt;# cpu系列&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Model:                 &lt;span class="m"&gt;62&lt;/span&gt;                   &lt;span class="c1"&gt;# CPU型号&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Stepping:              &lt;span class="m"&gt;4&lt;/span&gt;                    &lt;span class="c1"&gt;# 步进&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;CPU MHz:               &lt;span class="m"&gt;1200&lt;/span&gt;.000             &lt;span class="c1"&gt;# cpu主频(可能是平均值)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;BogoMIPS:              &lt;span class="m"&gt;4599&lt;/span&gt;.40&lt;/span&gt;
&lt;span class="code-line"&gt;Virtualization:        VT-x                 &lt;span class="c1"&gt;# cpu支持的虚拟化技术&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;L1d cache:             32K&lt;/span&gt;
&lt;span class="code-line"&gt;L1i cache:             32K&lt;/span&gt;
&lt;span class="code-line"&gt;L2 cache:              256K&lt;/span&gt;
&lt;span class="code-line"&gt;L3 cache:              16384K&lt;/span&gt;
&lt;span class="code-line"&gt;NUMA node0 CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:     &lt;span class="m"&gt;0&lt;/span&gt;-7,32-39            &lt;span class="c1"&gt;# 每个NUMA节点包括的线程&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;NUMA node1 CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:     &lt;span class="m"&gt;8&lt;/span&gt;-15,40-47&lt;/span&gt;
&lt;span class="code-line"&gt;NUMA node2 CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:     &lt;span class="m"&gt;16&lt;/span&gt;-23,48-55&lt;/span&gt;
&lt;span class="code-line"&gt;NUMA node3 CPU&lt;span class="o"&gt;(&lt;/span&gt;s&lt;span class="o"&gt;)&lt;/span&gt;:     &lt;span class="m"&gt;24&lt;/span&gt;-31,56-63&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;每个逻辑CPU的详细信息：/proc/cpuinfo&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;processor       : &lt;span class="m"&gt;0&lt;/span&gt;                                            &lt;span class="c1"&gt;# 逻辑CPU（线程）的编号, 从 0 到 最大线程数-1&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;vendor_id       : GenuineIntel                                 &lt;span class="c1"&gt;# 品牌&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cpu family      : &lt;span class="m"&gt;6&lt;/span&gt;                                            &lt;span class="c1"&gt;# cpu系列&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;model           : &lt;span class="m"&gt;62&lt;/span&gt;                                           &lt;span class="c1"&gt;# CPU型号&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;model name      : Intel&lt;span class="o"&gt;(&lt;/span&gt;R&lt;span class="o"&gt;)&lt;/span&gt; Xeon&lt;span class="o"&gt;(&lt;/span&gt;R&lt;span class="o"&gt;)&lt;/span&gt; CPU E5-4610 v2 @ &lt;span class="m"&gt;2&lt;/span&gt;.30GHz    &lt;span class="c1"&gt;# CPU名称与频率&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;stepping        : &lt;span class="m"&gt;4&lt;/span&gt;                                            &lt;span class="c1"&gt;# 步进&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cpu MHz         : &lt;span class="m"&gt;1200&lt;/span&gt;.000                                     &lt;span class="c1"&gt;# 当前线程的实时频率&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cache size      : &lt;span class="m"&gt;16384&lt;/span&gt; KB&lt;/span&gt;
&lt;span class="code-line"&gt;physical id     : &lt;span class="m"&gt;0&lt;/span&gt;                                            &lt;span class="c1"&gt;# 物理CPU编号，从 0 到 主板CPU插槽数-1。拥有相同 physical id 的所有逻辑处理器共享同一个物理插座。&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;siblings        : &lt;span class="m"&gt;16&lt;/span&gt;                                           &lt;span class="c1"&gt;# 此物理CPU的逻辑CPU数(或线程数) = 物理CPU核心数 * 单核多线程&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;core id         : &lt;span class="m"&gt;0&lt;/span&gt;                                            &lt;span class="c1"&gt;# 此物理CPU内的，核心编号， 从 0 到 核心数-1。所有带有相同 core id 的逻辑处理器均位于同一个处理器内核上。&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cpu cores       : &lt;span class="m"&gt;8&lt;/span&gt;                                            &lt;span class="c1"&gt;# 此物理CPU内的核心数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;apicid          : &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;initial apicid  : &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;fpu             : yes&lt;/span&gt;
&lt;span class="code-line"&gt;fpu_exception   : yes&lt;/span&gt;
&lt;span class="code-line"&gt;cpuid level     : &lt;span class="m"&gt;13&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;wp              : yes&lt;/span&gt;
&lt;span class="code-line"&gt;flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm consta&lt;/span&gt;
&lt;span class="code-line"&gt;bogomips        : &lt;span class="m"&gt;4600&lt;/span&gt;.23&lt;/span&gt;
&lt;span class="code-line"&gt;clflush size    : &lt;span class="m"&gt;64&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cache_alignment : &lt;span class="m"&gt;64&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;address sizes   : &lt;span class="m"&gt;46&lt;/span&gt; bits physical, &lt;span class="m"&gt;48&lt;/span&gt; bits virtual&lt;/span&gt;
&lt;span class="code-line"&gt;power management:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;如果有一个以上逻辑处理器拥有相同的 core id 和 physical id，则说明系统支持超线程（HT）技术。&lt;/li&gt;
&lt;li&gt;如果有两个或两个以上的逻辑处理器拥有相同的 physical id，但是 core id 不同，则说明这是一个多内核处理器。cpu cores 条目也可以表示是否支持多内核。&lt;/li&gt;
&lt;li&gt;判断CPU是否64位，检查cpuinfo中的flags区段，看是否有lm (long mode)标识。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cpu MHz是动态变化的&lt;/strong&gt;：因为CPU不工作时，降率能够降低热量与风扇噪音。
  查看CPU 时实动态频率&lt;code&gt;cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_cur_freq&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;逻辑CPU&lt;/th&gt;
&lt;th align="center"&gt;物理CPU&lt;/th&gt;
&lt;th align="center"&gt;CPU核数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;最大线程数&lt;/td&gt;
&lt;td align="center"&gt;实际服务器插槽上的CPU数目&lt;/td&gt;
&lt;td align="center"&gt;CPU核心数&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;逻辑CPU数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;cat /proc/cpuinfo|grep &amp;quot;processor&amp;quot;|wc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;物理CPU数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;cat /proc/cpuinfo|grep &amp;quot;physical\ id&amp;quot;|sort -u|wc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CPU核数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;cat /proc/cpuinfo|grep &amp;quot;cores&amp;quot;|sort -u&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;</content><category term="cpuinfo"></category></entry><entry><title>终端显示颜色</title><link href="https://ghxdghxd.github.io/terminal-color.html" rel="alternate"></link><published>2017-01-03T10:20:00+08:00</published><updated>2017-01-03T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2017-01-03:/terminal-color.html</id><summary type="html">&lt;p&gt;终端显示颜色&lt;/p&gt;</summary><content type="html">&lt;p&gt;echo显示带颜色，需要使用参数-e
格式如下:
echo -e "\033[字背景颜色;文字颜色m字符串\033[0m"
例如:
echo -e "\033[41;37m TonyZhang \033[0m"
其中41的位置代表底色, 37的位置是代表字的颜色&lt;/p&gt;
&lt;p&gt;注：
1、字背景颜色和文字颜色之间是英文的“""”
2、文字颜色后面有个m
3、字符串前后可以没有空格，如果有的话，输出也是同样有空格&lt;/p&gt;
&lt;p&gt;下面看几个例子：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[30m 黑色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[31m 红色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[32m 绿色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[33m 黄色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[34m 蓝色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[35m 紫色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[36m 天蓝字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[37m 白色字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[40;37m 黑底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[41;37m 红底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[42;37m 绿底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[43;37m 黄底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[44;37m 蓝底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[45;37m 紫底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[46;37m 天蓝底白字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;\033[47;30m 白底黑字 \033[0m&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!-- more --&gt;

&lt;p&gt;控制选项说明 ：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;代码&lt;/th&gt;
&lt;th&gt;作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;\33[0m&lt;/td&gt;
&lt;td&gt;关闭所有属性&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[1m&lt;/td&gt;
&lt;td&gt;设置高亮度&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[4m&lt;/td&gt;
&lt;td&gt;下划线&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[5m&lt;/td&gt;
&lt;td&gt;闪烁&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[7m&lt;/td&gt;
&lt;td&gt;反显&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[8m&lt;/td&gt;
&lt;td&gt;消隐&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[30m -- \33[37m&lt;/td&gt;
&lt;td&gt;设置前景色&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[40m -- \33[47m&lt;/td&gt;
&lt;td&gt;设置背景色&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[nA&lt;/td&gt;
&lt;td&gt;光标上移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[nB&lt;/td&gt;
&lt;td&gt;光标下移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[nC&lt;/td&gt;
&lt;td&gt;光标右移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[nD&lt;/td&gt;
&lt;td&gt;光标左移n行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[y;xH&lt;/td&gt;
&lt;td&gt;设置光标位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[2J&lt;/td&gt;
&lt;td&gt;清屏&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[K&lt;/td&gt;
&lt;td&gt;清除从光标到行尾的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[s&lt;/td&gt;
&lt;td&gt;保存光标位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[u&lt;/td&gt;
&lt;td&gt;恢复光标位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[?25l&lt;/td&gt;
&lt;td&gt;隐藏光标&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\33[?25h&lt;/td&gt;
&lt;td&gt;显示光标&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</content><category term="linux"></category><category term="color"></category></entry><entry><title>磁盘阵列</title><link href="https://ghxdghxd.github.io/raid.html" rel="alternate"></link><published>2016-11-06T18:29:36+08:00</published><updated>2017-05-02T23:45:22+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-11-06:/raid.html</id><summary type="html">&lt;p&gt;各种磁盘阵列的简介&lt;/p&gt;</summary><content type="html">&lt;h1&gt;磁盘阵列（Redundant Arrays of Independent Drives，RAID）&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Raid0: 最少需要&lt;strong&gt;2块&lt;/strong&gt;盘，没用冗余数据,不做备份，任何一块磁盘损坏都无法运行。n块磁盘（同类型）的阵列理论上读写速度是单块磁盘的n倍(实际达不到)，风险性也是单一n倍（实际更高），是磁盘阵列中存储性能最好的。适用于安全性不高，要求比较高性能的图形工作站或者个人站。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raid1：至少需要&lt;em&gt;2块&lt;/em&gt;*盘，磁盘数量是2的n倍，每一块磁盘要有对应的备份盘，利用率是50%，只要有一对磁盘没有损坏就可以正常使用。n组磁盘（2n块同类型磁盘）的阵列理论上读取速度是单块磁盘的n倍（实际达不到），风险性是单一磁盘的n分之一（实际更低）。换盘后需要长时间的镜像同步，不影响外界访问，但整个系统性能下降。磁盘控制器负载比较大。适用于安全性较高，且能较快恢复数据的场合。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raid10：至少需要&lt;strong&gt;4块&lt;/strong&gt;盘，磁盘数量也是2的n倍。既有数据镜像备份，也能保证较高的读写速度。成本比较大。&lt;strong&gt;容量 = 每块硬盘容量 * n/2&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raid3：至少需要&lt;strong&gt;3块&lt;/strong&gt;盘（2块盘没有校验的意义）。将数据存放在n+1块盘上，有效空间是n块盘的总和，最后一块存储校验信息。数据被分割存储在n块盘上，任一数据盘出现问题，可由其他数据盘通过校正监测恢复数据（可以带伤工作），换数据盘需要重新恢复完整的校验容错信息。对阵列写入时会重写校验盘的内容，对校验盘的负载较大，读写速度相较于Raid0较慢，适用于读取多而写入少的应用环境，比如数据库和web服务器。使用容错算法和分块的大小决定了Raid3在通常情况下用于大文件且安全性要求较高的应用，比如视频编辑、硬盘播出机、大型数据库等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raid5：至少需要&lt;strong&gt;3块&lt;/strong&gt;盘，读取速度接近Raid0，但是安全性更高。安全性上接近Raid1，但是磁盘的利用率更高。可以认为是Raid0和Raid1的一个折中方案。只允许有一块盘出错，可以通过另外多块盘来计算出故障盘的数据，故障之后必须尽快更换。比Raid0+1的磁盘利用率高，是目前比较常用的一种方案。&lt;strong&gt;容量 = 每块硬盘容量 * (n-2)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="raid"></category></entry><entry><title>git的一般用法</title><link href="https://ghxdghxd.github.io/git.html" rel="alternate"></link><published>2016-11-03T10:20:00+08:00</published><updated>2016-11-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-11-03:/git.html</id><summary type="html">&lt;p&gt;git的一般用法&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Git用法&lt;/h1&gt;
&lt;h2&gt;1 建立仓库&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;远程&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git remote add origin git@github.com:ghxdghxd&lt;span class="nv"&gt;$NAME&lt;/span&gt;.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;本地(初始化)&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git init&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;2 常用操作&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;拉取&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git pull origin master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;提交&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git add *.py&lt;/span&gt;
&lt;span class="code-line"&gt;git commit -m &lt;span class="s2"&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin master/dev/develop&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;ul&gt;
&lt;li&gt;重命令与删除&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git rm&lt;/span&gt;
&lt;span class="code-line"&gt;git mv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;3 分支操作&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;主支&lt;/th&gt;
&lt;th align="center"&gt;修补&lt;/th&gt;
&lt;th align="center"&gt;发布&lt;/th&gt;
&lt;th align="center"&gt;开发&lt;/th&gt;
&lt;th align="center"&gt;功能&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;master&lt;/td&gt;
&lt;td align="center"&gt;hotfix&lt;/td&gt;
&lt;td align="center"&gt;release&lt;/td&gt;
&lt;td align="center"&gt;develop&lt;/td&gt;
&lt;td align="center"&gt;feature&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git branch  /-a/r       &lt;span class="c1"&gt;# 查看本地/全部/远程分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git branch &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt;       &lt;span class="c1"&gt;# 建立分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git branch -d &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt;    &lt;span class="c1"&gt;# 删除本地分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin --delete &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt;         &lt;span class="c1"&gt;# 删除远程分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git checkout -b &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt; origin/develop   &lt;span class="c1"&gt;# 建立并切换开发分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git checkout &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt;                     &lt;span class="c1"&gt;# 切换分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git merge --no-ff &lt;span class="o"&gt;[&lt;/span&gt;name&lt;span class="o"&gt;]&lt;/span&gt;                &lt;span class="c1"&gt;# 合并分支&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git push origin dev:develop             &lt;span class="c1"&gt;# 本地分支提交到远程&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 删除远程分支后，本地未同步的问题&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git remote show origin      &lt;span class="c1"&gt;# 可以查看remote地址，远程分支，还有本地分支与之相对应关系等信息&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git remote prune origin     &lt;span class="c1"&gt;# 删除了那些远程仓库不存在的分支&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;push命令用于将本地分支的更新，推送到远程主机。&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push &amp;lt;远程主机名&amp;gt; &amp;lt;本地分支名&amp;gt;:&amp;lt;远程分支名&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;git pull类似:
    git pull &amp;lt;远程分支&amp;gt;:&amp;lt;本地分支&amp;gt;&lt;/p&gt;
&lt;p&gt;注意，分支推送顺序的写法是&amp;lt;来源地&amp;gt;:&amp;lt;目的地&amp;gt;，
所以git pull是&amp;lt;远程分支&amp;gt;:&amp;lt;本地分支&amp;gt;，而git push是&amp;lt;本地分支&amp;gt;:&amp;lt;远程分支&amp;gt;。
如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支(通常两者同名)，如果该远程分支不存在，则会被新建。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push origin master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令表示，将本地的master分支推送到origin主机的master分支。如果后者不存在，则会被新建。&lt;/p&gt;
&lt;p&gt;如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push origin :master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;等同于&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push origin --delete master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令表示删除origin主机的master分支。&lt;/p&gt;
&lt;p&gt;如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push origin&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令表示，将当前分支推送到origin主机的对应分支。&lt;/p&gt;
&lt;p&gt;如果当前分支只有一个追踪分支，那么主机名都可以省略。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果当前分支与多个主机存在追踪关系，则可以使用-u选项指定一个默认主机，这样后面就可以不加任何参数使用git push。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push -u origin master&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令将本地的master分支推送到origin主机，同时指定origin为默认主机，后面就可以不加任何参数使用git push了。&lt;/p&gt;
&lt;p&gt;不带任何参数的git push，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git 2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用git config命令。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git config --global push.default matching&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;或者&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git config --global push.default simple&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用–all选项。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push --all origin&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令表示，将所有本地分支都推送到origin主机。&lt;/p&gt;
&lt;p&gt;如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做git pull合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用–force选项。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push --force origin&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;上面命令使用–force选项，结果导致在远程主机产生一个”非直进式”的合并(non-fast-forward merge)。除非你很确定要这样做，否则应该尽量避免使用–force选项。&lt;/p&gt;
&lt;p&gt;最后，git push不会推送标签(tag)，除非使用–tags选项。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git push origin --tags&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;中文乱码&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git config --global core.quotepath &lt;span class="nb"&gt;false&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;core.quotepath设为false的话，就不会对0x80以上的字符进行quote。中文显示正常。&lt;/p&gt;
&lt;h2&gt;gitignore忽略文件&lt;/h2&gt;
&lt;p&gt;1、配置语法：&lt;/p&gt;
&lt;p&gt;以斜杠“/”开头表示目录；&lt;/p&gt;
&lt;p&gt;以星号“*”通配多个字符；&lt;/p&gt;
&lt;p&gt;以问号“?”通配单个字符&lt;/p&gt;
&lt;p&gt;以方括号“[]”包含单个字符的匹配列表；&lt;/p&gt;
&lt;p&gt;以叹号“!”表示不忽略(跟踪)匹配到的文件或目录；&lt;/p&gt;
&lt;p&gt;此外，git 对于 .ignore 配置文件是按行从上到下进行规则匹配的，意味着如果前面的规则匹配的范围更大，则后面的规则将不会生效；&lt;/p&gt;
&lt;p&gt;2、示例：&lt;/p&gt;
&lt;p&gt;（1）规则：fd1/*
　　　　  说明：忽略目录 fd1 下的全部内容；注意，不管是根目录下的 /fd1/ 目录，还是某个子目录 /child/fd1/ 目录，都会被忽略；&lt;/p&gt;
&lt;p&gt;（2）规则：/fd1/*
　　　　  说明：忽略根目录下的 /fd1/ 目录的全部内容；&lt;/p&gt;
&lt;p&gt;（3）规则：&lt;/p&gt;
&lt;p&gt;/*
!.gitignore
!/fw/bin/
!/fw/sf/&lt;/p&gt;
&lt;p&gt;说明：忽略全部内容，但是不忽略 .gitignore 文件、根目录下的 /fw/bin/ 和 /fw/sf/ 目录；&lt;/p&gt;
&lt;h2&gt;warning: LF will be replaced by CRLF&lt;/h2&gt;
&lt;p&gt;在Windows环境下使用git进行add的时候，会提示如下warning: “warning:LF will be replacee by CRLF”。&lt;/p&gt;
&lt;p&gt;这是因为在Windows中的换行符为CRLF，而在Linux中的换行符为LF。
在git创建的项目中换行符为LF，而执行git add时，系统会提示LF将被转换为CRLF。
解决的办法很简单，禁止git的自动转换即可。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;git config --global core.autocrlf &lt;span class="nb"&gt;false&lt;/span&gt; //禁用自动转换&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="git"></category></entry><entry><title>markdown格式详解</title><link href="https://ghxdghxd.github.io/markdown.html" rel="alternate"></link><published>2016-10-20T16:00:00+08:00</published><updated>2016-10-20T16:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-20:/markdown.html</id><summary type="html">&lt;p&gt;markdown格式详解&lt;/p&gt;</summary><content type="html">&lt;h1&gt;1 概述&lt;/h1&gt;
&lt;p&gt;&lt;a href="http://zh.wikipedia.org/wiki/Markdown" title="Wiki: Markdown"&gt;Wiki: Markdown&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Markdown 是一种轻量级标记语言，创始人为约翰·格鲁伯（John Gruber）。&lt;br /&gt;
它使用易读易写的纯文本格式编写文档，然后转换成有效的 XHTML（或者 HTML）文档。&lt;br /&gt;
这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。&lt;br /&gt;
”.md“ 和 ”.markdown“ 都是被普遍支持的扩展名，不过 ”.md“ 更加简单和方便。&lt;/p&gt;
&lt;h2&gt;为什么选择 Markdown&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;它基于纯文本，方便修改和共享&lt;/li&gt;
&lt;li&gt;几乎可以在所有的文本编辑器中编写&lt;/li&gt;
&lt;li&gt;有众多编程语言的实现，以及应用的相关扩展&lt;/li&gt;
&lt;li&gt;在 &lt;a href="https://github.com/"&gt;GitHub&lt;/a&gt; 等网站中有很好的应用&lt;/li&gt;
&lt;li&gt;很容易转换为 HTML 文档或其他格式&lt;/li&gt;
&lt;li&gt;适合用来编写文档、记录笔记、撰写文章&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;兼容 HTML&lt;/h3&gt;
&lt;p&gt;Markdown 完全兼容 HTML 语法，可以直接在 Markdown 文档中插入 HTML 内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;1&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;2&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;3&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;4&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;td&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;tr&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;table&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这段代码会变成下面的样子：&lt;/p&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;h1&gt;2 语法&lt;/h1&gt;
&lt;h2&gt;2.1 标题&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="left"&gt;任何数量的"="和"-"&lt;/th&gt;
&lt;th align="left"&gt;使用左边或两边对称"#"&lt;/th&gt;
&lt;th align="center"&gt;显示效果&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="left"&gt;正副二级标题&lt;/td&gt;
&lt;td align="left"&gt;标记1-6级标题&lt;/td&gt;
&lt;td align="center"&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;一级标题&lt;br&gt;======&lt;/td&gt;
&lt;td align="left"&gt;# 一级标题 &lt;s&gt;#&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h1&gt; 一级标题&lt;/h1&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;二级标题&lt;br&gt;------&lt;/td&gt;
&lt;td align="left"&gt;## 二级标题 &lt;s&gt;##&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h2&gt; 二级标题&lt;/h2&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;/td&gt;
&lt;td align="left"&gt;### 三级标题 &lt;s&gt;###&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h3&gt; 三级标题&lt;/h3&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;/td&gt;
&lt;td align="left"&gt;#### 四级标题 &lt;s&gt;####&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h4&gt; 四级标题&lt;/h4&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;/td&gt;
&lt;td align="left"&gt;##### 五级标题 &lt;s&gt;#####&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h5&gt; 五级标题&lt;/h5&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="left"&gt;&lt;/td&gt;
&lt;td align="left"&gt;###### 六级标题 &lt;s&gt;#####&lt;/s&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;h6&gt; 六级标题&lt;/h6&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;2.2 段落与换行&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;段落的前后必须是空行：&lt;/li&gt;
&lt;li&gt;空行指的是行内什么都没有，或者只有空白符（空格或制表符）&lt;/li&gt;
&lt;li&gt;相邻两行文本，如果中间没有空行会显示在一行中（换行符被转换为空格）&lt;/li&gt;
&lt;li&gt;如果需要在段落内加入换行（&lt;code&gt;&amp;lt;br&amp;gt;&lt;/code&gt;）：&lt;/li&gt;
&lt;li&gt;可以在前一行的末尾加入至少两个空格, 然后换行写其它的文字&lt;/li&gt;
&lt;li&gt;Markdown 中的多数区块都需要在两个空行之间&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2.3 引用&lt;/h2&gt;
&lt;h3&gt;2.3.1 引用内容&lt;/h3&gt;
&lt;p&gt;在段落或其他内容前使用 &lt;code&gt;&amp;gt;&lt;/code&gt; 符号，就可以将这段内容标记为 '引用' 的内容（&lt;code&gt;&amp;lt;blockquote&amp;gt;&lt;/code&gt;）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;引用内容&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;引用内容&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.3.2 多行引用&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;多行引用&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt;可以在每行前加 `&amp;gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;多行引用
可以在每行前加 &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;如果仅在第一行使用 `&amp;gt;`，&lt;/span&gt;
&lt;span class="code-line"&gt;后面相邻的行即使省略 `&amp;gt;`，也会变成引用内容&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;如果仅在第一行使用 &lt;code&gt;&amp;gt;&lt;/code&gt;，
后面相邻的行即使省略 &lt;code&gt;&amp;gt;&lt;/code&gt;，也会变成引用内容&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;如果引用内容需要换行，&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt;可以在行尾添加两个空格&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt;或者在引用内容中加一个空行&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;如果引用内容需要换行，
可以在行尾添加两个空格&lt;/p&gt;
&lt;p&gt;或者在引用内容中加一个空行&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.3.3 嵌套引用&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;也可以在引用中&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt;&amp;gt;使用嵌套的引用&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;也可以在引用中&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;使用嵌套的引用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.3.4 其他 Markdown&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt;在引用中可以使用使用其他任何 *Markdown* 语法&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;blockquote&gt;
&lt;p&gt;在引用中可以使用使用其他任何 &lt;em&gt;Markdown&lt;/em&gt; 语法&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;2.4 列表&lt;/h2&gt;
&lt;h3&gt;2.4.1 无序列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;* 可以使用 `*` 作为标记&lt;/span&gt;
&lt;span class="code-line"&gt;+ 也可以使用 `+`&lt;/span&gt;
&lt;span class="code-line"&gt;- 或者 `-`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;* 可以使用 &lt;code&gt;*&lt;/code&gt; 作为标记
+ 也可以使用 &lt;code&gt;+&lt;/code&gt;
- 或者 &lt;code&gt;-&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;2.4.2 有序列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;1. 有序列表以数字和 `.` 开始；&lt;/span&gt;
&lt;span class="code-line"&gt;3. 数字的序列并不会影响生成的列表序列；&lt;/span&gt;
&lt;span class="code-line"&gt;4. 但仍然推荐按照自然顺序（1.2.3...）编写。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;1.有序列表以数字和 &lt;code&gt;.&lt;/code&gt; 开始；
3.数字的序列并不会影响生成的列表序列；
4.但仍然推荐按照自然顺序（1.2.3...）编写。&lt;/p&gt;
&lt;h3&gt;2.4.3 嵌套的列表&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;1. 第一层&lt;/span&gt;
&lt;span class="code-line"&gt;+ 1-1&lt;/span&gt;
&lt;span class="code-line"&gt;+ 1-2&lt;/span&gt;
&lt;span class="code-line"&gt;2. 无序列表和有序列表可以随意相互嵌套&lt;/span&gt;
&lt;span class="code-line"&gt;1. 2-1&lt;/span&gt;
&lt;span class="code-line"&gt;2. 2-2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;1.第一层
+1-1
+1-2
2.无序列表和有序列表可以随意相互嵌套
1.2-1
2.2-2&lt;/p&gt;
&lt;h3&gt;语法和用法&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;无序列表项的开始是：符号 空格；&lt;/li&gt;
&lt;li&gt;有序列表项的开始是：数字 &lt;code&gt;.&lt;/code&gt; 空格；&lt;/li&gt;
&lt;li&gt;空格至少为一个，多个空格将被解析为一个；&lt;/li&gt;
&lt;li&gt;如果仅需要在行前显示数字和 &lt;code&gt;.&lt;/code&gt;：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;05\. 可以使用：数字\. 来取消显示为列表&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;05. 可以使用：数字\. 来取消显示为列表&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;\*&lt;/code&gt; 的语法专门用来显示 Markdown 语法中使用的特殊字符，参考 &lt;a href="blackslash-escapes.md"&gt;字符转义&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;2.5 代码&lt;/h2&gt;
&lt;h3&gt;2.5.1 代码块&lt;/h3&gt;
&lt;p&gt;可以使用缩进来插入代码块：&lt;/p&gt;
&lt;p&gt;&lt;html&gt; // Tab开头
&lt;title&gt;Markdown&lt;/title&gt;
&lt;/html&gt; // 四个空格开头&lt;/p&gt;
&lt;p&gt;代码块前后需要有至少一个空行，且每行代码前需要有至少一个 Tab 或四个空格；&lt;/p&gt;
&lt;h3&gt;2.5.2 行内代码&lt;/h3&gt;
&lt;p&gt;也可以通过 ``，插入行内代码（` 是 &lt;code&gt;Tab&lt;/code&gt; 键上边、数字 &lt;code&gt;1&lt;/code&gt; 键左侧的那个按键）：&lt;/p&gt;
&lt;p&gt;例如 &lt;code&gt;&amp;lt;title&amp;gt;Markdown&amp;lt;/title&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;2.5.3 转换规则&lt;/h3&gt;
&lt;p&gt;代码块中的文本（包括 Markdown 语法）都会显示为原始内容，而特殊字符会被转换为 HTML &lt;a href="https://zh.wikipedia.org/wiki/XML%E4%B8%8EHTML%E5%AD%97%E7%AC%A6%E5%AE%9E%E4%BD%93%E5%BC%95%E7%94%A8%E5%88%97%E8%A1%A8"&gt;字符实体&lt;/a&gt;。&lt;/p&gt;
&lt;h2&gt;2.6 分隔线&lt;/h2&gt;
&lt;p&gt;1. 可以在一行中使用三个或更多的 &lt;code&gt;*&lt;/code&gt;、&lt;code&gt;-&lt;/code&gt; 或 &lt;code&gt;_&lt;/code&gt; 来添加分隔线：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;***&lt;/span&gt;
&lt;span class="code-line"&gt;------&lt;/span&gt;
&lt;span class="code-line"&gt;___&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;hr /&gt;
&lt;hr /&gt;
&lt;p&gt;2. 多个字符之间可以有空格（空白符），但不能有其他字符：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;* * *&lt;/span&gt;
&lt;span class="code-line"&gt;- - -&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;hr /&gt;
&lt;h2&gt;2.7 超链接&lt;/h2&gt;
&lt;h3&gt;2.7.1 行内式&lt;/h3&gt;
&lt;p&gt;格式为 &lt;code&gt;[link text](URL 'title text')&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;① 普通链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[Google](http://www.google.com/)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.google.com/"&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;② 指向本地文件的链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[icon.png](./images/icon.png)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="./images/icon.png"&gt;icon.png&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;③ 包含 'title' 的链接:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[Google](http://www.google.com/ &amp;quot;Google&amp;quot;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.google.com/" title="Google"&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;title 使用 ' 或 " 都是可以的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.7.2 参考式&lt;/h3&gt;
&lt;p&gt;参考式链接的写法相当于行内式拆分成两部分，并通过一个 &lt;em&gt;识别符&lt;/em&gt; 来连接两部分。参考式能尽量保持文章结构的简单，也方便统一管理 URL。&lt;/p&gt;
&lt;p&gt;① 首先，定义链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[Google][link]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.google.com/" title="Google"&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;第二个方括号内为链接独有的 &lt;em&gt;识别符&lt;/em&gt;，可以是字母、数字、空白或标点符号。识别符是 &lt;em&gt;不区分大小写&lt;/em&gt; 的；&lt;/p&gt;
&lt;p&gt;② 然后定义链接内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;[link]: http://www.google.com/ &amp;quot;Google&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;其格式为：&lt;code&gt;[识别符]: URL 'title'&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;其中，URL可以使用 &amp;lt;&gt; 包括起来，title 可以使用 ""、''、() 包括（考虑到兼容性，建议使用引号），title 部分也可以换行来写；&lt;/p&gt;
&lt;p&gt;链接内容的定义可以放在同一个文件的 &lt;em&gt;任意位置&lt;/em&gt;；&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;③ 也可以省略 &lt;em&gt;识别符&lt;/em&gt;，使用链接文本作为 &lt;em&gt;识别符&lt;/em&gt;：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Google][]&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="na"&gt;[Google]: http://www.google.com/ &amp;quot;Google&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.google.com/" title="Google"&gt;Google&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;参考式相对于行内式有一个明显的优点，就是可以在多个不同的位置引用同一个 URL。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;2.7.3 自动链接&lt;/h3&gt;
&lt;p&gt;使用 &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; 包括的 URL 或邮箱地址会被自动转换为超链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;http://www.google.com/&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;lt;123@email.com&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://www.google.com/"&gt;http://www.google.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#49;&amp;#50;&amp;#51;&amp;#64;&amp;#101;&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#46;&amp;#99;&amp;#111;&amp;#109;"&gt;&amp;#49;&amp;#50;&amp;#51;&amp;#64;&amp;#101;&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#46;&amp;#99;&amp;#111;&amp;#109;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;该方式适合行内较短的链接，会使用 URL 作为链接文字。邮箱地址会自动编码，以逃避抓取机器人。&lt;/p&gt;
&lt;h2&gt;2.8 图像&lt;/h2&gt;
&lt;p&gt;插入图片的语法和插入超链接的语法基本一致，只是在最前面多一个 &lt;code&gt;!&lt;/code&gt;。也分为行内式和参考式两种。&lt;/p&gt;
&lt;h3&gt;2.8.1 行内式&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;![GitHub](https://avatars2.githubusercontent.com/u/3265208?v=3&amp;amp;s=100 &amp;quot;GitHub,Social Coding&amp;quot;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="GitHub" src="https://avatars2.githubusercontent.com/u/3265208?v=3&amp;amp;s=100" title="GitHub,Social Coding" /&gt;&lt;/p&gt;
&lt;p&gt;方括号中的部分是图片的替代文本，括号中的 'title' 部分和链接一样，是可选的。&lt;/p&gt;
&lt;h3&gt;2.8.2 参考式&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;![GitHub][github]&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;[github]: https://avatars2.githubusercontent.com/u/3265208?v=3&amp;amp;s=100 &amp;quot;GitHub,Social Coding&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="GitHub" src="https://avatars2.githubusercontent.com/u/3265208?v=3&amp;amp;s=100" title="GitHub,Social Coding" /&gt;&lt;/p&gt;
&lt;h3&gt;2.8.3 指定图片的显示大小&lt;/h3&gt;
&lt;p&gt;Markdown 不支持指定图片的显示大小，不过可以通过直接插入&lt;code&gt;&amp;lt;img /&amp;gt;&lt;/code&gt;标签来指定相关属性：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;img&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://avatars2.githubusercontent.com/u/3265208?v=3&amp;amp;s=100&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;alt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;GitHub&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;GitHub,Social Coding&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;50&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;height&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;50&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img src="https://avatars2.githubusercontent.com/u/3265208?v=3&amp;s=100" alt="GitHub" title="GitHub,Social Coding" width="50" height="50" /&gt;&lt;/p&gt;
&lt;h2&gt;2.9 强调&lt;/h2&gt;
&lt;p&gt;1. 使用 &lt;code&gt;* *&lt;/code&gt; 或 &lt;code&gt;_ _&lt;/code&gt; 包括的文本会被转换为 &lt;code&gt;&amp;lt;em&amp;gt;&amp;lt;/em&amp;gt;&lt;/code&gt; ，通常表现为斜体：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;这是用来 *演示* 的 _文本_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是用来 &lt;em&gt;演示&lt;/em&gt; 的 &lt;em&gt;文本&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2. 使用 &lt;code&gt;** **&lt;/code&gt; 或 &lt;code&gt;__ __&lt;/code&gt; 包括的文本会被转换为 &lt;code&gt;&amp;lt;strong&amp;gt;&amp;lt;/strong&amp;gt;&lt;/code&gt;，通常表现为加粗：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;这是用来 **演示** 的 __文本__&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是用来 &lt;strong&gt;演示&lt;/strong&gt; 的 &lt;strong&gt;文本&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;3. 用来包括文本的 &lt;code&gt;*&lt;/code&gt; 或 &lt;code&gt;_&lt;/code&gt; 内侧不能有空白，否则 &lt;code&gt;*&lt;/code&gt; 和 &lt;code&gt;_&lt;/code&gt; 将不会被转换（不同的实现会有不同的表现）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;这是用来 * 演示* 的 _文本 _&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是用来 * 演示* 的 _文本 _&lt;/p&gt;
&lt;p&gt;4. 如果需要在文本中显示成对的 &lt;code&gt;*&lt;/code&gt; 或 &lt;code&gt;_&lt;/code&gt;，可以在符号前加入 &lt;code&gt;\&lt;/code&gt; 即可：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;这是用来 \*演示\* 的 \_文本\_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是用来 *演示* 的 _文本_&lt;/p&gt;
&lt;p&gt;5. &lt;code&gt;*&lt;/code&gt;、&lt;code&gt;**&lt;/code&gt;、&lt;code&gt;_&lt;/code&gt; 和 &lt;code&gt;__&lt;/code&gt; 都必须 &lt;em&gt;成对使用&lt;/em&gt; 。&lt;/p&gt;
&lt;h2&gt;2.10 字符转义&lt;/h2&gt;
&lt;p&gt;反斜线（&lt;code&gt;\&lt;/code&gt;）用于插入在 Markdown 语法中有特殊作用的字符。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;这是用来 *演示* 的 _文本_&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;这是用来 \*演示\* 的 \_文本\_&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这是用来 &lt;em&gt;演示&lt;/em&gt; 的 &lt;em&gt;文本&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;这是用来 *演示* 的 _文本_&lt;/p&gt;
&lt;p&gt;这些字符包括：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;\&lt;/span&gt;
&lt;span class="code-line"&gt;`&lt;/span&gt;
&lt;span class="code-line"&gt;*&lt;/span&gt;
&lt;span class="code-line"&gt;_&lt;/span&gt;
&lt;span class="code-line"&gt;{}&lt;/span&gt;
&lt;span class="code-line"&gt;[]&lt;/span&gt;
&lt;span class="code-line"&gt;()&lt;/span&gt;
&lt;span class="code-line"&gt;#&lt;/span&gt;
&lt;span class="code-line"&gt;+&lt;/span&gt;
&lt;span class="code-line"&gt;-&lt;/span&gt;
&lt;span class="code-line"&gt;.&lt;/span&gt;
&lt;span class="code-line"&gt;!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="markdown"></category></entry><entry><title>awk使用记录</title><link href="https://ghxdghxd.github.io/awk.html" rel="alternate"></link><published>2016-10-12T22:12:00+08:00</published><updated>2018-12-18T22:30:24+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/awk.html</id><summary type="html">&lt;p&gt;awk的常用命令&lt;/p&gt;</summary><content type="html">&lt;h1&gt;awk日常用法&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;~/aaa/表示0包括aaa&lt;/span&gt;
&lt;span class="code-line"&gt;split &lt;span class="o"&gt;(&lt;/span&gt;string, array, field separator&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;split &lt;span class="o"&gt;(&lt;/span&gt;string, array&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="se"&gt;\-&lt;/span&gt;-&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;gt&lt;span class="p"&gt;;&lt;/span&gt;如果第三个参数没有提供，awk就默认使用当前FS值。&lt;/span&gt;
&lt;span class="code-line"&gt;substr&lt;span class="o"&gt;(&lt;/span&gt;s,p&lt;span class="o"&gt;)&lt;/span&gt; 返回字符串s中从p开始的后缀部分&lt;/span&gt;
&lt;span class="code-line"&gt;substr&lt;span class="o"&gt;(&lt;/span&gt;s,p,n&lt;span class="o"&gt;)&lt;/span&gt; 返回字符串s中从p开始长度为n的后缀部分&lt;/span&gt;
&lt;span class="code-line"&gt;length函数返回整个记录中的字符数。&lt;/span&gt;
&lt;span class="code-line"&gt;gsub&lt;span class="o"&gt;(&lt;/span&gt;regular expression, subsitution string, target string&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;index&lt;span class="o"&gt;(&lt;/span&gt;a,b&lt;span class="o"&gt;)&lt;/span&gt;, r返回b中a的位置，没有返回0&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;i&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;lt&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;length&lt;span class="o"&gt;(&lt;/span&gt;a&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;i++&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;awk &lt;span class="s1"&gt;&amp;#39;!a[$1&amp;quot; &amp;quot;$2]++{print}&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# 以第一列与第二列去重&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;awk &lt;span class="s1"&gt;&amp;#39;a[$1&amp;quot; &amp;quot;$2]++{print}&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# 以第一列与第二列去重，只显示重复行&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;awk,getline,用于获得下一行&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#输出奇数，&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;seq &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $0;getline}&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#输出偶数&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;seq &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{getline;print $0}&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#从第三行开始，每三行输出一次,如果后面没有足够的行，则输出最后一行&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;seq &lt;span class="m"&gt;10&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{getline;getline;print $0}&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;9&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;10&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 获得shell命令的结果&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 注: 如果cmd出错,则res为上一行的结果，因此前面添加**res=\&amp;quot;\&amp;quot;**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#     出现awk (Too many open files), 需要 **close(cmd)**&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;awk &lt;span class="s1"&gt;&amp;#39;{cmd=&amp;quot;echo&amp;quot;$0; res=&amp;quot;&amp;quot;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s1"&gt;    cmd|getline res;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s1"&gt;    print $res;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="s1"&gt;    close (cmd)}&amp;#39;&lt;/span&gt; file&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;awk传参&lt;/h2&gt;
&lt;h3&gt;方法一&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;{print a, b}&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;111&lt;/span&gt; &lt;span class="nv"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;222&lt;/span&gt; yourfile&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;注意, 变量位置要在 file 名之前, 否则就不能调用. 例如:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;{print a, b}&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;111&lt;/span&gt; file1 &lt;span class="nv"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;222&lt;/span&gt; file2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;file1 不能调用 b=222.
还有, 于BEGIN{}中是不能调用这些的variable.
要用之后所讲的第二种方法才可解决.&lt;/p&gt;
&lt;h3&gt;方法二&lt;/h3&gt;
&lt;p&gt;对每一个变量加一个 &lt;code&gt;-v&lt;/code&gt; 作传递&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk –v &lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;111&lt;/span&gt; –v &lt;span class="nv"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;222&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{print a,b}&amp;#39;&lt;/span&gt; yourfile&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;方法三&lt;/h3&gt;
&lt;p&gt;对于&lt;strong&gt;字符类型&lt;/strong&gt;，使用 双引号 + 单引号 + 变量&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;{print &amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$LOGNAME&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot;}&amp;#39;&lt;/span&gt; yourfile&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;但是,对于&lt;strong&gt;浮点类型&lt;/strong&gt;，&lt;strong&gt;使用方法会有出入&lt;/strong&gt;, 问题如下&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;用三个变量&lt;code&gt;a, b, c&lt;/code&gt;分别筛选&lt;code&gt;test&lt;/code&gt;文本的3列&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.25&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;b&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;c&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.05&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cat test.txt&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   0.872786159229803&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   0.0257941397953021&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   0.43720505769949&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   1.94370007597298e-05&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果，用双引号 + 单引号 + 变量, 只筛选出一行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;$1&amp;lt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; &amp;amp;&amp;amp; $2&amp;gt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; &amp;amp;&amp;amp; $3&amp;lt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$c&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; {OFS=&amp;quot;\t&amp;quot;;print $0}&amp;#39;&lt;/span&gt; test.txt&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   0.0257941397953021&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;如果，只用单引号 + 变量， 筛选出两行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;$1&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;amp;&amp;amp; $2&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;amp;&amp;amp; $3&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$c&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; {OFS=&amp;quot;\t&amp;quot;;print $0}&amp;#39;&lt;/span&gt; test.txt&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   0.0257941397953021&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 0.185260877381154 0.339233950224672   1.94370007597298e-05&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;很明显，单引号 + 变量 结果正确，用echo打印两行命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;$1&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;amp;&amp;amp; $2&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; &amp;amp;&amp;amp; $3&amp;lt;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$c&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; {OFS=&amp;quot;\t&amp;quot;;print $0}&amp;#39;&lt;/span&gt; test.txt&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# awk $1&amp;lt;0.25 &amp;amp;&amp;amp; $2&amp;gt;0.1 &amp;amp;&amp;amp; $3&amp;lt;0.05 {OFS=&amp;quot;   &amp;quot;;print $0} test.txt&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;$1&amp;lt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; &amp;amp;&amp;amp; $2&amp;gt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; &amp;amp;&amp;amp; $3&amp;lt;&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$c&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;quot; {OFS=&amp;quot;\t&amp;quot;;print $0}&amp;#39;&lt;/span&gt; test.txt&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# awk $1&amp;lt;&amp;quot;0.25&amp;quot; &amp;amp;&amp;amp; $2&amp;gt;&amp;quot;0.1&amp;quot; &amp;amp;&amp;amp; $3&amp;lt;&amp;quot;0.05&amp;quot; {OFS=&amp;quot; &amp;quot;;print $0} test.txt&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="awk"></category><category term="shell"></category><category term="linux"></category></entry><entry><title>R</title><link href="https://ghxdghxd.github.io/R.html" rel="alternate"></link><published>2016-10-12T21:52:00+08:00</published><updated>2018-01-13T10:02:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/R.html</id><summary type="html">&lt;p&gt;R的常用命令&lt;/p&gt;</summary><content type="html">&lt;h1&gt;R的常用命令&lt;/h1&gt;
&lt;h2&gt;字符串操作&lt;/h2&gt;
&lt;h3&gt;替换sub, gsub, chart&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kp"&gt;chartr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Ab&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;aB&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;text&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;查找grep, grepl&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;向量操作&lt;/li&gt;
&lt;li&gt;grep返回index&lt;/li&gt;
&lt;li&gt;grepl返回TRUE/FALSE&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;R动态变量&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#动态生成变量，并赋值&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="kp"&gt;assign&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;x&lt;span class="p"&gt;,&lt;/span&gt; value&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="R"></category></entry><entry><title>计算机字符编码</title><link href="https://ghxdghxd.github.io/Unicode.html" rel="alternate"></link><published>2016-10-12T21:52:00+08:00</published><updated>2018-02-28T11:10:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/Unicode.html</id><summary type="html">&lt;p&gt;计算机字符编码&lt;/p&gt;</summary><content type="html">&lt;h1&gt;计算机系统通用的字符编码&lt;/h1&gt;
&lt;h2&gt;数据结构(字符)&lt;/h2&gt;
&lt;p&gt;在计算机内存中，统一使用Unicode编码；当需要保存到硬盘或者需要传输的时候，就转换为UTF-8编码。&lt;br /&gt;
用记事本编辑的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8保存到文件：&lt;/p&gt;
&lt;p&gt;![编码1]](../images/bianma-1.png)&lt;/p&gt;
&lt;p&gt;utf-8编码的文件在内存中是unicode编码显示&lt;/p&gt;
&lt;p&gt;浏览网页的时候，服务器会把动态生成的Unicode内容转换为UTF-8再传输到浏览器：&lt;/p&gt;
&lt;p&gt;&lt;img alt="编码2" src="../images/bianma-2.png" /&gt;&lt;/p&gt;
&lt;p&gt;服务器把动态生成的Unicode内容转换为UTF-8再传输&lt;/p&gt;
&lt;p&gt;所以你看到很多网页的源码上会有类似&lt;meta charset="UTF-8" /&gt;的信息，表示该网页正是用的UTF-8编码。（UTF-8编码没有字节序的问题）&lt;/p&gt;
&lt;h2&gt;字符转化&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;序列化&lt;/strong&gt;: 将一个数据结构（unicode编码， utf-8等）转化为二进制的数据流。用于存储，或者发送给网络中的其它程序。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不同的编码形成的二进制流不一样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;反序列化&lt;/strong&gt;：与序列化相反，将二进制流重新恢复成更易于处理和阅读的数据结构&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;python中的编码&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Python中一切都是对象（object）。&lt;/li&gt;
&lt;li&gt;与字符编码类型有关的对象有str和bytes。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;str对象存储的字符是UNICODE类型，bytes对象存储的字符就是一串byte。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;str u'字符串以u开头'&lt;blockquote&gt;
&lt;p&gt;str.encode后得到的是一个bytes对象&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;bytes b'字节以b开头'&lt;blockquote&gt;
&lt;p&gt;bytes.decode之后，得到的是一个str对象。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;decode的作用是将其他编码的字符串转换成unicode编码，如str1.decode('gb2312')，表示将gb2312编码的字符串str1转换成unicode编码&lt;/p&gt;</content><category term="Unicode"></category><category term="UTF-8"></category></entry><entry><title>pandas</title><link href="https://ghxdghxd.github.io/pandas.html" rel="alternate"></link><published>2016-10-12T21:52:00+08:00</published><updated>2018-03-20T13:21:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/pandas.html</id><summary type="html">&lt;p&gt;pandas的常用命令&lt;/p&gt;</summary><content type="html">&lt;h1&gt;常用&lt;/h1&gt;
&lt;h2&gt;read_csv&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;header&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 第一行不设为列名&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;bed_df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_table&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dtype&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;object&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;chr&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;start&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pos&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ref&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;alt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;cat 合并&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;c&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;B&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;sep&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;,&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;filter&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mat&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;mat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;dataframe to list&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drop_duplicates&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tolist&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;merge dataframe&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;connect&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;mat1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mat2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mat3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;#axis=1 cbind, asis=0 rbind&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;insert&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mat&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;date&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# insert in 0 col&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;pandas错误&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;read_csv: C-engine CParserError: Error tokenizing data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When using read_csv like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_pickle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;faulty_row.pkl&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;faulty_row.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;faulty_row.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You get the following exception:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;CParserError: Error tokenizing data. C error: Buffer overflow caught - possible malformed input file.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Solution 1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can read the CSV using the python engine then no exception is thrown:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;faulty_row.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engine&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;python&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Solution 2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If your second-to-last line includes an '\r' break.
You can open in universal-new-line mode to solve the error.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;test.csv&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rU&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;engine&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;c&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="python"></category><category term="pandas"></category></entry><entry><title>python</title><link href="https://ghxdghxd.github.io/python.html" rel="alternate"></link><published>2016-10-12T21:52:00+08:00</published><updated>2018-02-28T11:10:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/python.html</id><summary type="html">&lt;p&gt;python的常用命令&lt;/p&gt;</summary><content type="html">&lt;h1&gt;python优化&lt;/h1&gt;
&lt;h2&gt;做一个pythonic的人&lt;/h2&gt;
&lt;h3&gt;1. 枚举&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. python -m cProfile&lt;/h3&gt;
&lt;h3&gt;3. time -p bash test.sh/python test.py&lt;/h3&gt;</content><category term="python"></category></entry><entry><title>shell</title><link href="https://ghxdghxd.github.io/shell.html" rel="alternate"></link><published>2016-10-12T21:52:00+08:00</published><updated>2018-05-28T11:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-10-12:/shell.html</id><summary type="html">&lt;p&gt;shell的常用命令&lt;/p&gt;</summary><content type="html">&lt;h1&gt;常用命令&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;0表示标准输入&lt;/span&gt;
&lt;span class="code-line"&gt;1表示标准输出&lt;/span&gt;
&lt;span class="code-line"&gt;2表示标准错误输出&lt;/span&gt;
&lt;span class="code-line"&gt;&amp;gt; 默认为标准输出重定向，与 &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt; 相同&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; 意思是把 标准错误输出 重定向到 标准输出.&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;file 意思是把 标准输出 和 标准错误输出 都重定向到文件file中&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;a href="awk"&gt;awk&lt;/a&gt;&lt;/h2&gt;
&lt;h2&gt;sed&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sed -n &lt;span class="s1"&gt;&amp;#39;/A/,/B/p&amp;#39;&lt;/span&gt;  匹配A的行与匹配B的行之间的内容&lt;/span&gt;
&lt;span class="code-line"&gt;sed -n &lt;span class="s1"&gt;&amp;#39;2p,4,5p&amp;#39;&lt;/span&gt; 输出2 &lt;span class="m"&gt;4&lt;/span&gt;,5 行&lt;/span&gt;
&lt;span class="code-line"&gt;sed &lt;span class="s2"&gt;&amp;quot;s/&lt;/span&gt;&lt;span class="nv"&gt;$a&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;$b&lt;/span&gt;&lt;span class="s2"&gt;/g&amp;quot;&lt;/span&gt; 变量替换&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;grep&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;cat file  &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s1"&gt;&amp;#39;[:space:]*#&amp;#39;&lt;/span&gt;匹配空格&lt;/span&gt;
&lt;span class="code-line"&gt;grep -P &lt;span class="s1"&gt;&amp;#39;\t&amp;#39;&lt;/span&gt; 匹配制表符&lt;/span&gt;
&lt;span class="code-line"&gt;grep -E &lt;span class="s2"&gt;&amp;quot;abc|123&amp;quot;&lt;/span&gt; myfile -n 两个关键词&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ln&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;ln -s 源文件 目标文件&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;paste&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;paste -s -d &lt;span class="s1"&gt;&amp;#39;\t&amp;#39;&lt;/span&gt;  多行合并成一行&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;tr&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;tr -s &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt; 多个空格变一个&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;sort&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sort -V 按染色体排序 &lt;span class="m"&gt;1&lt;/span&gt;，2，3，，，，X，Y&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;unzip&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;unzip -l zipfile   查看list&lt;/span&gt;
&lt;span class="code-line"&gt;unzip -p zipfile &lt;span class="s2"&gt;&amp;quot;*/getfile&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;less   查看指定文件&lt;/span&gt;
&lt;span class="code-line"&gt;unzip -d outdir    指定输出目录&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gzip&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;gzip -t/--test 检测gz文件是否有错误&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;find&lt;/h2&gt;
&lt;p&gt;按大小
find . -size +50M&lt;/p&gt;
&lt;p&gt;find 按文件修改时间查找文件&lt;/p&gt;
&lt;p&gt;----(+n)---------|------------(n)--------------|---------(-n)----
   (n+1)&lt;em&gt;24H前   |    (n+1)&lt;/em&gt;24H ~ n&lt;em&gt;24H之间  |  n&lt;/em&gt;24H以内&lt;/p&gt;
&lt;p&gt;-ctime -n    查找距现在 n&lt;em&gt;24H 内修改过的文件
-ctime n    查找距现在 n&lt;/em&gt;24H 前, (n+1)&lt;em&gt;24H 内修改过的文件
-ctime +n    查找距现在 (n+1)&lt;/em&gt;24H 前修改过的文件&lt;/p&gt;
&lt;p&gt;[a|c|m]min    [最后访问|最后状态修改|最后内容修改]min
[a|c|m]time    [最后访问|最后状态修改|最后内容修改]time&lt;/p&gt;
&lt;p&gt;linux 文件的几种时间 (以 find 为例):
atime 最后一次访问时间, 如 ls, more 等, 但 chmod, chown, ls, stat 等不会修改些时间, 使用 ls -utl 可以按此时间顺序查看;
ctime 最后一次状态修改时间, 如 chmod, chown 等状态时间改变但修改时间不会改变, 使用 stat file 可以查看;
mtime 最后一次内容修改时间, 如 vi 保存后等, 修改时间发生改变的话, atime 和 ctime 也相应跟着发生改变.&lt;/p&gt;
&lt;p&gt;注意: linux 里是不会记录文件的创建时间的, 除非这个文件自创建以来没有发生改变, 那么它的创建时间就是它的最后一次修改时间.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ls -lt    ./  按修改时间顺序查看
&lt;/em&gt;ls -lut ./ 按访问时间顺序查看&lt;/p&gt;
&lt;p&gt;[acm]time  计量单位是天，即24H
[acm]min    计量单位是分钟
find ./ -mtime 0  #查找一天内修改的文件
find ./ -mtime -2 #查找2天内修改的文件，多了一个减号
find ./ -mmin  -10  #查找距离现在10分钟内修改的文件&lt;/p&gt;
&lt;h2&gt;计算 expr&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;expr &lt;span class="m"&gt;1&lt;/span&gt; + &lt;span class="m"&gt;1&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;expr&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;查看网速sar&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sar -n DEV &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;100&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;sudo !!命令&lt;/h2&gt;
&lt;p&gt;没有特定输入sudo命令而运行，将给出没有权限的错误。那么，你不需要重写整个命令，仅仅输入'!!'就可以抓取最后的命令。&lt;/p&gt;
&lt;h2&gt;Ctrl+x+e命令&lt;/h2&gt;
&lt;p&gt;这个命令对于管理员和开发者非常有用。为了使每天的任务自动化，管理员需要通过输入vi、vim、nano等打开编辑器。&lt;/p&gt;
&lt;p&gt;仅仅从命令行快速的敲击“Ctrl-x-e”，就可以在编辑器中开始工作了。&lt;/p&gt;
&lt;h2&gt;nl命令&lt;/h2&gt;
&lt;p&gt;“nl命令”添加文件的行数。&lt;/p&gt;
&lt;h2&gt;shuf n1&lt;/h2&gt;
&lt;p&gt;随机从一个文件或文件夹中选择行/文件/文件夹。首先使用ls命令来显示文件夹的内容。&lt;/p&gt;
&lt;h2&gt;数组&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;array&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;cat test.txt&lt;span class="p"&gt;|&lt;/span&gt;cut -f &lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;# 数组全部&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="si"&gt;${#&lt;/span&gt;&lt;span class="nv"&gt;array&lt;/span&gt;&lt;span class="p"&gt;[@]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;# 数组长度&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;array&lt;/span&gt;&lt;span class="p"&gt;[0]&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;# 数组元素 0 1 2&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="shell"></category></entry><entry><title>算法复杂度</title><link href="https://ghxdghxd.github.io/timeO.html" rel="alternate"></link><published>2016-06-21T19:57:00+08:00</published><updated>2017-07-25T11:02:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-06-21:/timeO.html</id><summary type="html">&lt;p&gt;漂亮的大 O 速查表, 计算机科学里面常见算法的时间和空间的大 OBig-O 复杂度&lt;/p&gt;</summary><content type="html">&lt;h1&gt;&lt;/h1&gt;
&lt;p&gt;原文章在&lt;a href="https://linux.cn/article-7480-1.html"&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;图例&lt;/h2&gt;
&lt;table&gt;
&lt;tr&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;绝佳&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;不错&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;一般&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ffc543;"&gt;不佳&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;糟糕&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;h2&gt;数据结构操作&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th style="text-align: center;"&gt;数据结构&lt;/th&gt;&lt;th style="text-align: center;" colspan="8"&gt;时间复杂度&lt;/th&gt;&lt;th style="text-align: center;"&gt;空间复杂度&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th style="text-align: center;"&gt;&amp;nbsp;&lt;/th&gt;&lt;th style="text-align: center;" colspan="4"&gt;平均&lt;/th&gt;&lt;th style="text-align: center;" colspan="4"&gt;最差&lt;/th&gt;&lt;th style="text-align: center;"&gt;最差&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;&lt;th style="text-align: center;"&gt;访问&lt;/th&gt;&lt;th style="text-align: center;"&gt;搜索&lt;/th&gt;&lt;th style="text-align: center;"&gt;插入&lt;/th&gt;&lt;th style="text-align: center;"&gt;删除&lt;/th&gt;&lt;th style="text-align: center;"&gt;访问&lt;/th&gt;&lt;th style="text-align: center;"&gt;搜索&lt;/th&gt;&lt;th style="text-align: center;"&gt;插入&lt;/th&gt;&lt;th style="text-align: center;"&gt;删除&lt;/th&gt;&lt;th style="text-align: center;"&gt;&amp;nbsp;&lt;/th&gt;&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Array_data_structure" class="ext" rel="external nofollow" target="_blank"&gt;Array&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Stack_(abstract_data_type)" class="ext" rel="external nofollow" target="_blank"&gt;Stack&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Singly_linked_list#Singly_linked_lists" class="ext" rel="external nofollow" target="_blank"&gt;Singly-Linked List&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Doubly_linked_list" class="ext" rel="external nofollow" target="_blank"&gt;Doubly-Linked List&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Skip_list" class="ext" rel="external nofollow" target="_blank"&gt;Skip List&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ffc543;"&gt;O(n log(n))&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Hash_table" class="ext" rel="external nofollow" target="_blank"&gt;Hash Table&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Binary_search_tree" class="ext" rel="external nofollow" target="_blank"&gt;Binary Search Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://en.wikipedia.org/wiki/Cartesian_tree" class="ext" rel="external nofollow" target="_blank"&gt;Cartesian Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/B_tree" class="ext" rel="external nofollow" target="_blank"&gt;B-Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Red-black_tree" class="ext" rel="external nofollow" target="_blank"&gt;Red-Black Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="https://en.wikipedia.org/wiki/Splay_tree" class="ext" rel="external nofollow" target="_blank"&gt;Splay Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/AVL_tree" class="ext" rel="external nofollow" target="_blank"&gt;AVL Tree&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;图操作&lt;/h2&gt;
&lt;table&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;th style="text-align: center;"&gt;节点 / 边界管理&lt;/th&gt;&lt;th style="text-align: center;"&gt;存储&lt;/th&gt;&lt;th style="text-align: center;"&gt;增加顶点&lt;/th&gt;&lt;th style="text-align: center;"&gt;增加边界&lt;/th&gt;&lt;th style="text-align: center;"&gt;移除顶点&lt;/th&gt;&lt;th style="text-align: center;"&gt;移除边界&lt;/th&gt;&lt;th style="text-align: center;"&gt;查询&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Adjacency_list" class="ext" rel="external nofollow" target="_blank"&gt;Adjacency list&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|V|+|E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|V| + |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|V|)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Incidence_list" class="ext" rel="external nofollow" target="_blank"&gt;Incidence list&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|V|+|E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|E|)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Adjacency_matrix" class="ext" rel="external nofollow" target="_blank"&gt;Adjacency matrix&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V|^2)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V|^2)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V|^2)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Incidence_matrix" class="ext" rel="external nofollow" target="_blank"&gt;Incidence matrix&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V| ⋅ |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V| ⋅ |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V| ⋅ |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V| ⋅ |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(|V| ⋅ |E|)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(|E|)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;堆操作&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th style="text-align: center;"&gt;类型&lt;/th&gt;&lt;th style="text-align: center;" colspan="7"&gt;时间复杂度&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th style="text-align: center;"&gt;&amp;nbsp;&lt;/th&gt;&lt;th style="text-align: center;"&gt;Heapify&lt;/th&gt;&lt;th style="text-align: center;"&gt;查找最大值&lt;/th&gt;&lt;th style="text-align: center;"&gt;分离最大值&lt;/th&gt;&lt;th style="text-align: center;"&gt;提升键&lt;/th&gt;&lt;th style="text-align: center;"&gt;插入&lt;/th&gt;&lt;th style="text-align: center;"&gt;删除&lt;/th&gt;&lt;th style="text-align: center;"&gt;合并&lt;/th&gt;&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Linked_list" class="ext" rel="external nofollow" target="_blank"&gt;Linked List (sorted)&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(m+n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="white-space: normal;"&gt;&lt;a href="http://en.wikipedia.org/wiki/Linked_list" class="ext" rel="external nofollow" target="_blank"&gt;Linked List (unsorted)&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Binary_heap" class="ext" rel="external nofollow" target="_blank"&gt;Binary Heap&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #6f6e00; background-color: #ff0;"&gt;O(n)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #b20000; background-color: #ff8989;"&gt;O(m+n)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Binomial_heap" class="ext" rel="external nofollow" target="_blank"&gt;Binomial Heap&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;" title="With aux pointer"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;" title="Amortized"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;"&gt;O(log(n))&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href="http://en.wikipedia.org/wiki/Fibonacci_heap" class="ext" rel="external nofollow" target="_blank"&gt;Fibonacci Heap&lt;/a&gt;&lt;/td&gt;
&lt;td style="text-align: center;"&gt;-&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;" title="Amortized"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;" title="Amortized"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #c8ea00;" title="Amortized"&gt;O(log(n))&lt;/td&gt;
&lt;td style="text-align: center; padding: 2px; color: #286500; background-color: #53d000;"&gt;O(1)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2&gt;大 O 复杂度图表&lt;/h2&gt;
&lt;p&gt;&lt;img alt="BigO" src="../images/BigO.png" /&gt;&lt;/p&gt;</content><category term="time"></category></entry><entry><title>Java parallelGCThreads的选择</title><link href="https://ghxdghxd.github.io/Java-parallelGCThreads.html" rel="alternate"></link><published>2016-01-08T15:31:01+08:00</published><updated>2016-12-30T16:20:13+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2016-01-08:/Java-parallelGCThreads.html</id><summary type="html">&lt;p&gt;Java parallelGCThreads的选择&lt;/p&gt;</summary><content type="html">&lt;h1&gt;1.含义&lt;/h1&gt;
&lt;p&gt;ParallelGCThreads，表示JVM在进行并行GC的时候，用于GC的线程数，-XX:ParallelGCThreads=43，表示配置GC线程数为43。&lt;/p&gt;
&lt;h1&gt;2.JVM相关接口&lt;/h1&gt;
&lt;p&gt;JVM中，关于ParallelGCThreads的计算代码如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;VM_Version&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;calc_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;is_M_series&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// for now, use same gc thread calculation for M-series as for niagara-plus&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// in future, we may want to tweak parameters for nof_parallel_worker_thread&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nof_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;is_niagara_plus&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nof_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;nof_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;Abstract_VM_Version&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt;&lt;span class="n"&gt;_parallel_worker_threads_initialized&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FLAG_IS_DEFAULT&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="n"&gt;_parallel_worker_threads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;VM_Version&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;calc_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="n"&gt;_parallel_worker_threads&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;_parallel_worker_threads_initialized&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;Abstract_VM_Version&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;calc_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;nof_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;Abstract_VM_Version&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;nof_parallel_worker_threads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;den&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;switch_pt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FLAG_IS_DEFAULT&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;assert&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Default ParallelGCThreads is not 0&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// For very large machines, there are diminishing returns&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// for large numbers of worker threads.  Instead of&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// hogging the whole system, use a fraction of the workers for every&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// processor after the first 8.  For example, on a 72 cpu machine&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// and a chosen fraction of 5/8&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="c1"&gt;// use 8 + (72 - 8) * (5/8) == 48 worker threads.&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;ncpus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;active_processor_count&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ncpus&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;switch_pt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="n"&gt;ncpus&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;switch_pt&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;ncpus&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;switch_pt&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;den&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;3.计算方法&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;上面列出了与ParallelGCThreads计算相关的几个核心接口，其中，最主要关注nof_parallel_worker_threads接口，该接口中给出了计算ParallelGCThreads值的具体算法，具体如下：&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;① 如果用户显示指定了ParallelGCThreads，则使用用户指定的值。&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;② 否则，需要根据实际的CPU所能够支持的线程数来计算ParallelGCThreads的值，计算方法见步骤③和步骤④。&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;③ 如果物理CPU所能够支持线程数小于8，则ParallelGCThreads的值为CPU所支持的线程数。这里的阀值为8，是因为JVM中调用nof_parallel_worker_threads接口所传入的switch_pt的值均为8。&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;④ 如果物理CPU所能够支持线程数大于8，则ParallelGCThreads的值为8加上一个调整值，调整值的计算方式为：物理CPU所支持的线程数减去8所得值的5/8或者5/16，JVM会根据实际的情况来选择具体是乘以5/8还是5/16。&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;比如，在64线程的x86 CPU上，如果用户未指定ParallelGCThreads的值，则默认的计算方式为：ParallelGCThreads = 8 + (64 - 8) * (5/8) = 8 + 35 = 43。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="Java"></category></entry><entry><title>linux好用软件集</title><link href="https://ghxdghxd.github.io/linux-soft.html" rel="alternate"></link><published>2015-02-03T10:20:00+08:00</published><updated>2018-07-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2015-02-03:/linux-soft.html</id><summary type="html">&lt;p&gt;自己用的linux软件以及遇到的问题整理&lt;/p&gt;</summary><content type="html">&lt;h1&gt;1. guake terminal&lt;/h1&gt;
&lt;h2&gt;简介&lt;/h2&gt;
&lt;p&gt;guake terminal， 一个下拉式终端&lt;a href="https://github.com/Guake/guake"&gt;这里下载&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;问题&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Ctrl+D in the terminal does not close the tab anymore, but freezes the current tab&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ubuntu上遇到此问题，解决办法是安装 libutempter0,参考&lt;a href="https://github.com/Guake/guake/issues/1198"&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;2. anaconda&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;简介&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;python 的管理工具&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;问题&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1.matplotlib中文显示参数设置&lt;/p&gt;
&lt;p&gt;由于matplotlib库中没有中文字体。&lt;/p&gt;
&lt;p&gt;将对应的字体&lt;a href="https://github.com/StellarCN/scp_zh/blob/master/fonts/SimHei.ttf"&gt;SimHei.tff&lt;/a&gt;拷贝到
~/anaconda3/lib/python3.5/site-packages/matplotlib/mpl-data/fonts/ttf/&lt;/p&gt;
&lt;p&gt;在 ~/anaconda3/lib/python3.5/site-packages/matplotlib/mpl-data/matplotlibrc 中，删除font.family和font.sans-serif两行前的#，并在font.sans-serif后添加SimHei
font.family          :sans-serif
font.sans-serif     : SimHei, DejaVu Serif（后面还有很多，略去）
axes.unicode_minus，将True改为False&lt;/p&gt;
&lt;p&gt;删除~/.cache/matplotlib字体缓存&lt;/p&gt;</content><category term="linux"></category><category term="software"></category></entry><entry><title>登录终端信息</title><link href="https://ghxdghxd.github.io/terminal-announcement.html" rel="alternate"></link><published>2014-12-04T16:20:00+08:00</published><updated>2016-03-09T22:07:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-12-04:/terminal-announcement.html</id><summary type="html">&lt;p&gt;登录终端显示提示信息&lt;/p&gt;</summary><content type="html">&lt;h1&gt;/etc/issue&lt;/h1&gt;
&lt;p&gt;在终端接口登录时候的提示字符,例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;root@linux ~&lt;span class="o"&gt;]&lt;/span&gt; cat /etc/issue&lt;/span&gt;
&lt;span class="code-line"&gt;CentOS release &lt;span class="m"&gt;5&lt;/span&gt;.6 &lt;span class="o"&gt;(&lt;/span&gt;Final&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Kernel &lt;span class="se"&gt;\r&lt;/span&gt; on an &lt;span class="se"&gt;\m&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;issue内各代码说明：&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\d&lt;/span&gt;  本地端时间的日期&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\l&lt;/span&gt;  显示第几个终端接口&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\m&lt;/span&gt;  显示硬件的等级&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\n&lt;/span&gt;  显示主机的网络名称&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\o&lt;/span&gt;  显示域名&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\r&lt;/span&gt;  操作系统的版本&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\t&lt;/span&gt;  显示本地端的时间&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\s&lt;/span&gt;  操作系统的名称&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="se"&gt;\v&lt;/span&gt;  操作系统的版本&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;/etc/motd&lt;/h1&gt;
&lt;p&gt;登录后的公告消息, 比如：系统将会在某个时间进行维护&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;vi /etc/motd&lt;/span&gt;
&lt;span class="code-line"&gt;    Hello everyone,&lt;/span&gt;
&lt;span class="code-line"&gt;    Our server will be maintained at&lt;/span&gt;
&lt;span class="code-line"&gt;    please don&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t login at that time,thanks.&lt;/span&gt;
&lt;span class="code-line"&gt;    那么当用户登录的时候，就会显示设置的内容了。&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="terminal"></category></entry><entry><title>集群管理笔记</title><link href="https://ghxdghxd.github.io/linux-management.html" rel="alternate"></link><published>2014-12-04T16:10:16+08:00</published><updated>2018-03-09T22:07:02+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-12-04:/linux-management.html</id><summary type="html">&lt;p&gt;常用的linux服务器管理&lt;/p&gt;</summary><content type="html">&lt;h1&gt;电源配置&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;由于安装之初，未使用线标签标记，后续管理十分不便...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;插座&lt;/th&gt;
&lt;th&gt;1孔&lt;/th&gt;
&lt;th&gt;2孔&lt;/th&gt;
&lt;th&gt;3孔&lt;/th&gt;
&lt;th&gt;4孔&lt;/th&gt;
&lt;th&gt;5孔&lt;/th&gt;
&lt;th&gt;6孔&lt;/th&gt;
&lt;th&gt;7孔&lt;/th&gt;
&lt;th&gt;8孔&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;4号&lt;/td&gt;
&lt;td&gt;1上&lt;/td&gt;
&lt;td&gt;1下&lt;/td&gt;
&lt;td&gt;2下&lt;/td&gt;
&lt;td&gt;4上&lt;/td&gt;
&lt;td&gt;2上&lt;/td&gt;
&lt;td&gt;3下&lt;/td&gt;
&lt;td&gt;3上&lt;/td&gt;
&lt;td&gt;插座3号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3号&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;8下&lt;/td&gt;
&lt;td&gt;8上&lt;/td&gt;
&lt;td&gt;7下&lt;/td&gt;
&lt;td&gt;7上&lt;/td&gt;
&lt;td&gt;大右&lt;/td&gt;
&lt;td&gt;大左&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2号&lt;/td&gt;
&lt;td&gt;4下&lt;/td&gt;
&lt;td&gt;显&lt;/td&gt;
&lt;td&gt;交下&lt;/td&gt;
&lt;td&gt;5下&lt;/td&gt;
&lt;td&gt;交上&lt;/td&gt;
&lt;td&gt;5上&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;1号&lt;/td&gt;
&lt;td&gt;插座2号&lt;/td&gt;
&lt;td&gt;小右&lt;/td&gt;
&lt;td&gt;6左&lt;/td&gt;
&lt;td&gt;外下&lt;/td&gt;
&lt;td&gt;管上&lt;/td&gt;
&lt;td&gt;6右&lt;/td&gt;
&lt;td&gt;管下&lt;/td&gt;
&lt;td&gt;小左&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1&gt;常用操作&lt;/h1&gt;
&lt;h2&gt;清理内存&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &amp;gt; /proc/sys/vm/drop_caches&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;a href="terminal-announcement"&gt;登录显示信息&lt;/a&gt;&lt;/h2&gt;
&lt;h2&gt;添加外挂硬盘&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;mount /dev/sdc1 /extra          &lt;span class="c1"&gt;#158&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/sdb1 /export/swap/   &lt;span class="c1"&gt;#162&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;a href="cpuinfo"&gt;CPU信息&lt;/a&gt;&lt;/h2&gt;
&lt;h2&gt;GPU计算卡&lt;/h2&gt;
&lt;h3&gt;查看GPU型号&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo lspci &lt;span class="p"&gt;|&lt;/span&gt; grep NVIDIA&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;安装驱动&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget http://cn.download.nvidia.com/tesla/410.79/NVIDIA-Linux-x86_64-410.79.run&lt;/span&gt;
&lt;span class="code-line"&gt;chmod a+x NVIDIA-Linux-x86_64-410.79.run&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;&lt;a href="raid"&gt;磁盘阵列简介&lt;/a&gt;&lt;/h2&gt;
&lt;h2&gt;系统配置(CPU + GPU + raid)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;配置&lt;/li&gt;
&lt;li&gt;commput0&lt;ul&gt;
&lt;li&gt;[2.10GHz] * 4 * 8核/CPU * 2线程/核 = 64&lt;/li&gt;
&lt;li&gt;1T * 6块 &amp;gt;&amp;gt;&amp;gt; 3T(raid10), 485M boot + 1.9T root + 781G /export/swap&lt;/li&gt;
&lt;li&gt;sda1, sda3, sdb1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;compute1-4&lt;ul&gt;
&lt;li&gt;[2.60GHz] * 4 * 6核/CPU * 2线程/核 = 48&lt;/li&gt;
&lt;li&gt;TeslaK20Xm GPU ，cuda核心数 2688， 内存6G&lt;/li&gt;
&lt;li&gt;/state/partition1 每个计算节点的私有空间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;compute5&lt;ul&gt;
&lt;li&gt;[2.60GHz] * 4 * 6核/CPU * 2线程/核 = 48&lt;/li&gt;
&lt;li&gt;/state/partition1 每个计算节点的私有空间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;compute6&lt;ul&gt;
&lt;li&gt;[2.20GHz] * 4 * 6核/CPU * 2线程/核 = 48&lt;/li&gt;
&lt;li&gt;/state/partition1 每个计算节点的私有空间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;compute7-8&lt;ul&gt;
&lt;li&gt;[2.30GHz] * 4 * 8核/CPU * 2线程/核 = 64&lt;/li&gt;
&lt;li&gt;/state/partition1 每个计算节点的私有空间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;数据线(raid5)&lt;ul&gt;
&lt;li&gt;3T * 3块 &amp;gt;&amp;gt;&amp;gt; 6T, sdd1&lt;/li&gt;
&lt;li&gt;4T * 6块 &amp;gt;&amp;gt;&amp;gt; 18T, sdc1, sdc2&lt;/li&gt;
&lt;li&gt;8T * 3块 &amp;gt;&amp;gt;&amp;gt; 15T, sde1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;网线(raid5)&lt;ul&gt;
&lt;li&gt;4T * 5块 &amp;gt;&amp;gt;&amp;gt; 16T, /dev/mapper/mpathep1&lt;/li&gt;
&lt;li&gt;4T * 5块 &amp;gt;&amp;gt;&amp;gt; 16T, /dev/mapper/mpathfp1&lt;/li&gt;
&lt;li&gt;8T * 5块 &amp;gt;&amp;gt;&amp;gt; 30T, /dev/mapper/mpathhp1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;rocks常用命令&lt;/h2&gt;
&lt;h3&gt;所有节点运行&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rocks run host &lt;span class="s2"&gt;&amp;quot;hostname&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;同步配制&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rocks sync config&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;要先重启管理节点然后计算机节点,否则导致数据不同步&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rocks run host &lt;span class="s2"&gt;&amp;quot;/etc/init.d/pbs_mom restart&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;添加用户&lt;strong&gt;无法qusb要在/etc/group 添加用户&lt;/strong&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;useradd -g group name &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#/etc/passwd name:x:xxx:xxx::/export/home/casual:/bin/bash&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;passwd name&lt;/span&gt;
&lt;span class="code-line"&gt;rocks sync users &lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#可更改/export/home/name 为&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#/home/name : /etc/passwd name:x:xxx:xxx::/home/casual:/bin/bash&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#如果要修改用户名（未测试过）&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;usermod -l newName oldName&lt;/span&gt;
&lt;span class="code-line"&gt;mv /export/home/newName /export/home/oldName&lt;/span&gt;
&lt;span class="code-line"&gt;usermod -d /export/home/newName -m newName&lt;/span&gt;
&lt;span class="code-line"&gt;rocks sync users&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;如果ssh compute 需要输入密码&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rm -rf ~/.ssh &lt;span class="c1"&gt;#然后 退出登录 再登陆 会自动生成新密钥&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;节点进入单用户模式&lt;/h3&gt;
&lt;p&gt;在倒计时5秒时，按任意键出现下图，
&lt;strong&gt;选择如图，按e进入编辑, 最后加上１,回车,按b,root进入系统&lt;/strong&gt;
&lt;img alt="图1" src="images/manager1.png" style="height:30%; width:30%;" /&gt;
&lt;img alt="图2" src="images/manager2.png" style="height:30%; width:30%;" /&gt;
&lt;img alt="图3" src="images/manager3.jpg" style="height:30%; width:30%;" /&gt;&lt;/p&gt;
&lt;h3&gt;重装节点&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rocks &lt;span class="nb"&gt;set&lt;/span&gt; host boot compute1 &lt;span class="nv"&gt;action&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;提交任务后，无运行时间,且qdel: Server could not connect to MOM&lt;/h3&gt;
&lt;p&gt;由于节点pbs_mom没运行
解决办法是进入节点后运行pbs_mom&lt;/p&gt;
&lt;h2&gt;qmgr&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;qmgr -c &lt;span class="s2"&gt;&amp;quot;print server&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# 输出server的属性&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;qmgr -c &lt;span class="s2"&gt;&amp;quot;set server query_other_jobs = true&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# qstat可以查看所有用户&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;qmgr -c &lt;span class="s2"&gt;&amp;quot;set server auto_node_np = True&amp;quot;&lt;/span&gt; &lt;span class="c1"&gt;# 自动更新节点线程数&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Draining system to allow starving job to run (qstat -s)&lt;/h2&gt;
&lt;p&gt;队列中还有排队非常久的饥饿进程，为了更公平合理使用队列，所以将新提交的作业做置为排队状态以让出资源运行排队的饥饿作业&lt;/p&gt;
&lt;p&gt;修改/opt/torque/spool/sched_priv/sched_config&lt;/p&gt;
&lt;p&gt;before:
help_starving_jobs true ALL&lt;/p&gt;
&lt;p&gt;after:
help_starving_jobs false ALL&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/opt/torque/init.d/pbs_sched pbs_mom pbs_server&lt;/span&gt;
&lt;span class="code-line"&gt;service pbs_server restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;multipath与iscsi操作&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;硬件连接及硬盘灯(绿)&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确定服务开启:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;service iscsi restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看iscsi发现记录&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;iscsiadm -m node&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;发现iscsi存储：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;iscsiadm -m discovery -t st -p 10.1.1.100:3260&lt;/span&gt;
&lt;span class="code-line"&gt;iscsiadm -m discovery -t st -p 10.1.1.101:3260&lt;/span&gt;
&lt;span class="code-line"&gt;iscsiadm -m discovery -t st -p 10.1.1.102:3260&lt;/span&gt;
&lt;span class="code-line"&gt;iscsiadm -m discovery -t st -p 10.1.1.103:3260&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;multipath操作&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;multipath -ll &lt;span class="c1"&gt;#查看&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;multipath -v2  &lt;span class="c1"&gt;#自动更新路径&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;multipath -f mpathg &lt;span class="c1"&gt;# 删除路径&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service multipathd restart &lt;span class="c1"&gt;#重启确认/dev/mapper下有硬盘连接&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 挂载&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/mapper/mpathep1 /export/data2&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/mapper/mpathfp1 /export/data3&lt;/span&gt;
&lt;span class="code-line"&gt;mount /dev/mapper/mpathhp1 /export/data4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;挂载fstab&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/dev/sdc1 /export/data0 ext4 defaults 1 1&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/sdc2 /export/data1 ext4 defaults 1 1&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/sde1 /export/data5 ext4 defaults 1 1&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/mapper/mpathhp1 /export/data4 xfs defaults,_netdev 0 0&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/mapper/mpathep1 /export/data2 xfs defaults,_netdev 0 0&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/mapper/mpathfp1 /export/data3 xfs defaults,_netdev 0 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;autofs自动挂载&lt;/p&gt;
&lt;p&gt;autofs一般与ldap、nfs协作实现远程home目录。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;确认/export/*,一般重启服务&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;service autofs restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/etc/auto.master&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/share /etc/auto.share --timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1200&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/home /etc/auto.home  --timeout&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1200&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/etc/auto.share 如果要增加新存储，需要添加，如swap&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;apps -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt;  xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#bio  -nfsvers=3 -soft,intr,timeo=9999  xmu:/export/&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data0 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data1 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data2 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data3 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data4 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;data5 -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;swap -nfsvers&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt; -soft,intr,timeo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;9999&lt;/span&gt; xmu.local:/export/&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;/etc/exportfs 如果要增加新存储，需要添加，如swap&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/export &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data0 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data1 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data2 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data3 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data4 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/data5 &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/export/swap &lt;span class="m"&gt;10&lt;/span&gt;.1.1.1&lt;span class="o"&gt;(&lt;/span&gt;rw,async,no_root_squash&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;.1.1.0/255.255.255.0&lt;span class="o"&gt;(&lt;/span&gt;rw,async&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;修复分区(未完)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;exportfs -rv &lt;span class="c1"&gt;#重新扫描/etc/exports&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;exportfs -u /export/data2       &lt;span class="c1"&gt;#umount分区&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;xfs_check /dev/mapper/mpathep1&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt; &lt;span class="c1"&gt;#显示0表示已umount&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;qsub&lt;/h2&gt;
&lt;p&gt;1.指定运行节点&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;qsub -l &lt;span class="nv"&gt;nodes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;:n3:ppn&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;40&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;qusb -l &lt;span class="nv"&gt;nodes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;:n1:ppn&lt;span class="o"&gt;=&lt;/span&gt;+1:n2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2.重新运行任务&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;    qrerun&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3.lib&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in &lt;span class="sb"&gt;`&lt;/span&gt;seq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;do&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo scp /etc/profile.d/set.sh compute-0-&lt;span class="nv"&gt;$i&lt;/span&gt;:/etc/profile.d/set.sh&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="k"&gt;done&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;rm /usr/lib64/libstdc++.so.6&lt;/span&gt;
&lt;span class="code-line"&gt;ln -s /share/apps/gcc-5.3.0/lib64/libstdc++.so.6.0.21 libstdc++.so.6&lt;/span&gt;
&lt;span class="code-line"&gt;strings /usr/lib/libstdc++.so.6 &lt;span class="p"&gt;|&lt;/span&gt; grep&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;showq&lt;/h2&gt;
&lt;p&gt;出现错误：
ERROR:    cannot send request to server xmu.cn:42559 (server may not be running)
ERROR:    cannot request service (status)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;cp /opt/maui/sbin/maui /etc/init.d&lt;/span&gt;
&lt;span class="code-line"&gt;/etc/init.d/maui start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;CentOS 6.5 升级内核&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org&lt;/span&gt;
&lt;span class="code-line"&gt;rpm -Uvh http://www.elrepo.org/elrepo-release-6-8.el6.elrepo.noarch.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;yum elrepo源有 ml（mainline 为最新版本的内核）和 lt（长期支持的内核）两种内核，这里我们选择 lt 内核&lt;/span&gt;
&lt;span class="code-line"&gt;yum --enablerepo&lt;span class="o"&gt;=&lt;/span&gt;elrepo-kernel -y install kernel-lt （kernel-ml）&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;引导文件修改（grub.conf）&lt;/span&gt;
&lt;span class="code-line"&gt;将 default 设置为 &lt;span class="m"&gt;0&lt;/span&gt; ，default&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;vim /etc/grub.conf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="图4" height="50%" src="images/manager4.png" width="50%" /&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a href="fail2ban"&gt;使用 fail2ban 防御 SSH 服务器的暴力破解攻击&lt;/a&gt;&lt;/h1&gt;
&lt;h1&gt;install glibc&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;conda install -c asmeurer glibc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;/lib64/libc.so.6软链接&lt;/h2&gt;
&lt;p&gt;当libc.so.6被升级或被删除后，ls, mv等命令无法使用, 现在如下错误：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/bin/ls: error &lt;span class="k"&gt;while&lt;/span&gt; loading shared libraries: libc.so.6: cannot open shared object file: No such file or directory&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;通过使用LD_PRELOAD解决，方法如下：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;先删除连接 ：&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# cd /lib64&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# LD_PRELOAD=/lib64/libc-2.3.6.so.bak rm libc.so.6&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;建立新连接 ：&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# LD_PRELOAD=/lib64/libc-2.3.6.so.bak ln -s /lib64/libc-2.3.6.so.bak libc.so.6&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;screen&lt;/h2&gt;
&lt;p&gt;切换用户后，screen出现如下提示：Cannot open your terminal '/dev/pts/38' - please check&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;script /dev/null &lt;span class="c1"&gt;#更新 tty，再执行screen&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="centos"></category><category term="shell"></category><category term="hpc"></category><category term="rocks cluster"></category><category term="manage"></category></entry><entry><title>R与Rstudio的安装过程（ubuntu）</title><link href="https://ghxdghxd.github.io/R-and-Rstudio.html" rel="alternate"></link><published>2014-11-13T10:20:00+08:00</published><updated>2017-02-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-11-13:/R-and-Rstudio.html</id><summary type="html">&lt;p&gt;ubuntu安装R与Rstudio的过程&lt;/p&gt;</summary><content type="html">&lt;h1&gt;install R&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;error&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;File failed to load: /extensions/MathZoom.js&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;CFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-I/share/apps/R_depends/include&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LDFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-L/share/apps/R_depends/lib&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$LD_LIBRARY_PATH&lt;/span&gt;:/share/apps/R_depends/lib&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;!--more--&gt;

&lt;h2&gt;before&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;apt-get build-dep r-base-core&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;./configure&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;./configure --prefix&lt;span class="o"&gt;=&lt;/span&gt;/opt/R-3.3.1 --enable-R-shlib --with-libpng --with-jpeglib --with-libtiff --with-x --with-tcltk &lt;span class="se"&gt;\&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;--with-blas --with-lapack &lt;span class="c1"&gt;# 提高矩阵速度&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;1. configure: error: No F77 compiler found&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install gfortran&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. configure: error: --with-readline&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install libreadline-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3. configure: error: --with-x=yes&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install libxt-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4. checking whether zlib support suffices&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install zlib1g-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;5. checking whether bzip2 support suffices&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget &amp;lt;http://www.bzip.org/1.0.6/bzip2-1.0.6.tar.gz&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf bzip2-1.0.6.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; bzip2-1.0.6&lt;/span&gt;
&lt;span class="code-line"&gt;sudo make install&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# OR&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;make -f Makefile-libbz2_so&lt;/span&gt;
&lt;span class="code-line"&gt;make clean&lt;/span&gt;
&lt;span class="code-line"&gt;make -n install &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$R_depends&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;make install &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$R_depends&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;install bzip2-lib&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;6. configure: error: "liblzma&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install liblzma-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;7. configure: error: pcre &amp;gt;= 8.10&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf pcre-8.39.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; pcre-8.39&lt;/span&gt;
&lt;span class="code-line"&gt;./configure --enable-utf8 --prefix&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$R_depends&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;make &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;amp&lt;span class="p"&gt;;&lt;/span&gt; sudo make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;8. libcurl &amp;gt;= 7.28.0 library and headers are required with support for https&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://www.openssl.org/source/openssl-1.1.0b.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf openssl-1.1.0b.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; openssl-1.1.0b&lt;/span&gt;
&lt;span class="code-line"&gt;./config&lt;/span&gt;
&lt;span class="code-line"&gt;make &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;amp&lt;span class="p"&gt;;&lt;/span&gt;  sudo make install&lt;/span&gt;
&lt;span class="code-line"&gt;wget &amp;lt;https://curl.haxx.se/download/curl-7.50.3.tar.gz&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf curl-7.50.3.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; curl-7.50.3&lt;/span&gt;
&lt;span class="code-line"&gt;./configure --with-ssl&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/ssl/&lt;/span&gt;
&lt;span class="code-line"&gt;make &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;amp&lt;span class="p"&gt;;&lt;/span&gt; sudo make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;9.configure: WARNING: you cannot build info or HTML versions of the R manuals&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install texinfo&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;10. configure: WARNING: you cannot build PDF versions of the R manuals, configure: WARNING: you cannot build PDF versions of vignettes and help pages&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install texlive&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;11. configure: WARNING: neither inconsolata.sty nor zi4.sty found: PDF vignettes and package manuals will not be rendered optimally&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget &amp;lt;http://mirrors.ctan.org/install/fonts/inconsolata.tds.zip&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mv inconsolata.tds.zip /usr/share/texlive/texmf-dist/tex/latex&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/share/texlive/texmf-dist/tex/latex&lt;/span&gt;
&lt;span class="code-line"&gt;unzip inconsolata.tds.zip&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mktexlsr&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;12. 本版本不支持png&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install libpng16-dev&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install libtiff5-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;make&lt;/h2&gt;
&lt;h3&gt;1./usr/local/lib/libbz2.a: 无法添加符号: 错误的值&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;rm /usr/local/lib/libbz2.a&lt;/span&gt;
&lt;span class="code-line"&gt;wget &amp;lt;http://zlib.net/zlib-1.2.8.tar.gz&amp;gt;&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf zlib-1.2.8.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; zlib-1.2.8&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;CC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gcc -fPIC&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;./configure&lt;span class="p"&gt;;&lt;/span&gt; make &lt;span class="nb"&gt;test&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2./usr/bin/ld: cannot find -lbz2 ;  collect2: error: ld returned 1 exit status&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install libbz2-dev&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 会用到&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;make &lt;span class="nv"&gt;CC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;gcc -fPIC&amp;#39;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;make install &lt;span class="nv"&gt;PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/software/packages&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;make install&lt;/h2&gt;
&lt;h3&gt;1.conftest.c:1:17: fatal error: jni.h&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; R-3.3.1/doc&lt;/span&gt;
&lt;span class="code-line"&gt;wget &amp;lt;https://cran.r-project.org/doc/manuals/r-release/NEWS.pdf&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;install rstudio&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install libjpeg62-dev&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install libgstreamer0.10-0&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install libgstreamer-plugins-base0.10-0&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;RSTUDIO_WHICH_R&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/opt/R-3.3.1/bin/R&amp;quot;&lt;/span&gt; 添加到/etc/profile或~/.profile&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;run R&lt;/h3&gt;
&lt;h3&gt;Error in grid.Call(L_textBounds, as.graphicsAnnot(xlabel),xlabel),x x, x$y, :无法载入X11字面为2,大小为20的字形-&lt;em&gt;-courier-%s-%s-&lt;/em&gt;-&lt;em&gt;-%d-&lt;/em&gt;-&lt;em&gt;-&lt;/em&gt;-&lt;em&gt;-&lt;/em&gt;-&lt;em&gt;-&lt;/em&gt;&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install t1-xfree86-nonfree ttf-xfree86-nonfree ttf-xfree86-nonfree-syriac&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install xfonts-75dpi&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install xfonts-100dpi&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install mesa-utils&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install libxtst-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;using R&lt;/h3&gt;
&lt;h3&gt;无法载入共享目标对象 stringi.so&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;install.packages&lt;span class="o"&gt;(&lt;/span&gt;stringi&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;R install.packages returns "failed to create lock directory"&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;R CMD INSTALL --no-lock &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;lt&lt;span class="p"&gt;;&lt;/span&gt;pkg&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;gt&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# OR&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;install.packages&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Rcpp&amp;quot;&lt;/span&gt;, &lt;span class="nv"&gt;dependencies&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;TRUE, &lt;span class="nv"&gt;INSTALL_opts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; c&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;\--no-lock&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;An irrecoverable exception occurred. R is aborting now ... ERROR: loading failed&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;R CMD INSTALL --no-test-load *packages*&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;nlopt&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;./configure --enable-shared&lt;/span&gt;
&lt;span class="code-line"&gt;make&lt;/span&gt;
&lt;span class="code-line"&gt;make install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;semi-transparency is not supported on this device&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install libcairo2-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;configure: error: missing required header GL/gl.h, configure: error: missing required header GL/glu.h&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install mesa-common-dev&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt install libglu1-mesa-dev&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;install units based on udunits2&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;conda install udunits2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;install.packages&lt;span class="p"&gt;(&lt;/span&gt;install.packages&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;units&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    configure.args&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;--with-udunits2-lib=/share/apps/anaconda3/lib --with-udunits2-include=/share/apps/anaconda3/include&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="R"></category><category term="Rstudio"></category></entry><entry><title>fedora常用配置</title><link href="https://ghxdghxd.github.io/fedora-install.html" rel="alternate"></link><published>2014-11-13T10:20:00+08:00</published><updated>2018-01-27T10:27:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-11-13:/fedora-install.html</id><summary type="html">&lt;p&gt;fedora常用安装与配置&lt;/p&gt;</summary><content type="html">&lt;h1&gt;config fedora&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo rm -rf /opt&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install yum-utils&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;* package-cleanup --oldkernels&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;RPM Fusion Free/Nonfree源, FZUG源&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;27&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf config-manager --add-repo&lt;span class="o"&gt;=&lt;/span&gt;http://mirrors.aliyun.com/repo/fedora.repo&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-&lt;span class="nv"&gt;$version&lt;/span&gt;.noarch.rpm -y&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-&lt;span class="nv"&gt;$version&lt;/span&gt;.noarch.rpm -y&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install https://repo.fdzh.org/FZUG/free/&lt;span class="nv"&gt;$version&lt;/span&gt;/x86_64/noarch/fzug-release-&lt;span class="nv"&gt;$version&lt;/span&gt;-0.2.noarch.rpm -y&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf makecache&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;upgrade&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf check-update &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; sudo dnf upgrade&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install sqlite&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;disable Wayland&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/etc/gdm/custom.conf&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;WaylandEnable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;chrome&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm  &lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install ./google-chrome-stable_current_x86_64.rpm  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;git&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install git&lt;/span&gt;
&lt;span class="code-line"&gt;git config --global user.name username&lt;/span&gt;
&lt;span class="code-line"&gt;git config --global user.email email&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;guake&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install guake&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gnome-tweak-tool&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install gnome-tweak-tool&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install chrome-gnome-shell&lt;/span&gt;
&lt;span class="code-line"&gt;dashtodocky&lt;/span&gt;
&lt;span class="code-line"&gt;Topicons plus&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;wbpy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install fcitx-table-chinese&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install fcitx-configtool&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install im-chooser&lt;/span&gt;
&lt;span class="code-line"&gt;im-chooser&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;zsh&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install zsh&lt;/span&gt;
&lt;span class="code-line"&gt;wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - &lt;span class="p"&gt;|&lt;/span&gt; zsh&lt;/span&gt;
&lt;span class="code-line"&gt;chsh -s /bin/zsh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;change PATH language&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US&lt;/span&gt;
&lt;span class="code-line"&gt;xdg-user-dirs-gtk-update&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;zh_CN&lt;/span&gt;
&lt;span class="code-line"&gt;reboot&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;install ubuntu fonts&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install ttmkfdir&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;fontname&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;ubuntu-font-family-0.83&lt;/span&gt;
&lt;span class="code-line"&gt;wget http://font.ubuntu.com/download/&lt;span class="nv"&gt;$fontname&lt;/span&gt;.zip&lt;/span&gt;
&lt;span class="code-line"&gt;mkdir /tmp/&lt;span class="nv"&gt;$fontname&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;unzip -j &lt;span class="nv"&gt;$fontname&lt;/span&gt;.zip -d /tmp/&lt;span class="nv"&gt;$fontname&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mkdir /usr/share/fonts/ubuntu&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mv /tmp/&lt;span class="nv"&gt;$fontname&lt;/span&gt;/*.ttf /usr/share/fonts/ubuntu&lt;/span&gt;
&lt;span class="code-line"&gt;rm -rf /tmp/&lt;span class="nv"&gt;$fontname&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /usr/share/fonts/ubuntu&lt;/span&gt;
&lt;span class="code-line"&gt;ttmkfdir &amp;gt; fonts.dir&lt;/span&gt;
&lt;span class="code-line"&gt;fc-cache -fv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;exFat &amp;amp; sshfs&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install exfat-utils&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install fuse-exfat&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt install sshfs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;synergy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://binaries.symless.com/v1.8.8/synergy-v1.8.8-stable-25a8cb2-Linux-x86_64.rpm&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install ./synergy-v1.8.8-stable-25a8cb2-Linux-x86_64.rpm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;sublime text&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf update&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install sublime-text&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;anaconda&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://repo.continuum.io/archive/Anaconda3-5.0.0.1-Linux-x86_64.sh&lt;/span&gt;
&lt;span class="code-line"&gt;bash Anaconda3-4.3.1-Linux-x86_64.sh&lt;span class="p"&gt;|&lt;/span&gt;sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;zotero&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://download.zotero.org/client/release/5.0.23/https://download.zotero.org/client/release/5.0.23/Zotero-5.0.23_linux-x86_64.tar.bz2&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf Zotero-5.0.23_linux-x86_64.tar.bz2&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mv Zotero_linux-x86_64/&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;cp /share/apps/Zotero_linux-x86_64/zotero.desktop /usr/share/applications&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git clone https://github.com/jlegewie/zotfile.git&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; zotfile&lt;/span&gt;
&lt;span class="code-line"&gt;make&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;wewechat&lt;/h2&gt;
&lt;h2&gt;thunderbird&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install thunderbird-enigmail&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;atom&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf --assumeyes install make gcc gcc-c++ glibc-devel git-core libsecret-devel rpmdevtools libX11-devel libxkbfile-devel&lt;/span&gt;
&lt;span class="code-line"&gt;sudo dnf install ./atom.x86_64.rpm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;wordpress&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo dnf install -y php php-mysqlnd mysql mysql-server mysql-devel workpress&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; httpd.service mariadb.service&lt;/span&gt;
&lt;span class="code-line"&gt;sudo systemctl start httpd.service mariadb.service&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo mysqladmin -u root password&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;vi /etc/httpd/conf.d/wordpress.conf&lt;/span&gt;
&lt;span class="code-line"&gt;Require &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="o"&gt;======&lt;/span&gt;&amp;gt;  Require all granted&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo firewall-cmd --add-service&lt;span class="o"&gt;=&lt;/span&gt;http --permanent&lt;/span&gt;
&lt;span class="code-line"&gt;sudo firewall-cmd --reload  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ModuleNotFoundError: No module named 'Xlib'&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;pip install python3_xlib&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ModuleNotFoundError: No module named 'xdg'&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;pip install pyxdg&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;File failed to load: /extensions/MathZoom.jsrs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;install R&lt;/h1&gt;
&lt;p&gt;参考&lt;a href="R-and-Rstudio"&gt;这里&lt;/a&gt;&lt;/p&gt;</content><category term="fedora"></category><category term="linux"></category><category term="R"></category></entry><entry><title>ubuntu常用配置</title><link href="https://ghxdghxd.github.io/ubuntu-install.html" rel="alternate"></link><published>2014-11-13T10:20:00+08:00</published><updated>2017-12-28T08:05:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-11-13:/ubuntu-install.html</id><summary type="html">&lt;p&gt;ubuntu常用安装与配置&lt;/p&gt;</summary><content type="html">&lt;h1&gt;config ubuntu&lt;/h1&gt;
&lt;h2&gt;upgrade&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt update &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; sudo apt upgrade&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;chrome&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt -fy install ./google-chrome-stable_current_amd64.deb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;git&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install git&lt;/span&gt;
&lt;span class="code-line"&gt;git config --global user.name &lt;span class="s2"&gt;&amp;quot;user name&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;git config --global user.email user@email.com&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;guake&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install python-dbus-dev&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt install libutempter-dev&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt-get install automake libgconf2-dev python-glade2 libtool python-keybinder&lt;/span&gt;
&lt;span class="code-line"&gt;git clone https://github.com/Guake/guake.git&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; guake&lt;/span&gt;
&lt;span class="code-line"&gt;sudo ./dev.sh --install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gnome-tweak-tool&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install gnome-tweak-tool&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt install gnome-shell-extension-dash-to-panel&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;wbpy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install fcitx-table-wbpy&lt;/span&gt;
&lt;span class="code-line"&gt;im-config -s fcitx&lt;/span&gt;
&lt;span class="code-line"&gt;sudo cp /usr/share/fcitx/xdg/autostart/fcitx-autostart.desktop /etc/xdg/autostart/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;zsh&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt install zsh&lt;/span&gt;
&lt;span class="code-line"&gt;wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - &lt;span class="p"&gt;|&lt;/span&gt; zsh&lt;/span&gt;
&lt;span class="code-line"&gt;chsh -s &lt;span class="sb"&gt;`&lt;/span&gt;which zsh&lt;span class="sb"&gt;`&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo shutdown -r &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;change PATH language&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US&lt;/span&gt;
&lt;span class="code-line"&gt;xdg-user-dirs-gtk-update&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;zh_CN&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;exFat&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt instal exfat-fuse&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo apt install sshfs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;anaconda&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;wget https://repo.continuum.io/archive/Anaconda3-4.3.1-Linux-x86_64.sh&lt;/span&gt;
&lt;span class="code-line"&gt;bash Anaconda3-4.3.1-Linux-x86_64.sh&lt;span class="p"&gt;|&lt;/span&gt;sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;synergy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get -fy install ./synergy-v1.8.8-stable-c30301e-Linux-x86_64.deb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;sublime&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get -fy install ./sublime-text_build-3126_amd64.deb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;atom&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get -fy install ./atom-amd64.deb&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;youdao-dict&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get -fy install ./youdao-dict_1.1.0-0-deepin_amd64.deb&lt;/span&gt;
&lt;span class="code-line"&gt;wget https://pypi.python.org/packages/48/9a/bcf41728a0a81b3d76e2a873296c2912300c653f9e6453c760a50bd2ef93/python-xlib-0.19.tar.bz2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;ModuleNotFoundError&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;No module named 'Xlib'&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;pip install python3_xlib&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;No module named 'xdg'&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;pip install pyxdg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;wechat&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;sudo snap install electronic-wechat&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;File failed to load: /extensions/MathZoom.js&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;&lt;a href="R-and-Rstudio"&gt;install R&lt;/a&gt;&lt;/h1&gt;</content><category term="ubuntu"></category><category term="linux"></category><category term="R"></category></entry><entry><title>分区挂载</title><link href="https://ghxdghxd.github.io/mount.html" rel="alternate"></link><published>2014-11-03T00:20:00+08:00</published><updated>2017-10-21T20:52:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-11-03:/mount.html</id><summary type="html">&lt;p&gt;mount挂载说明&lt;/p&gt;</summary><content type="html">&lt;h1&gt;/etc/fstab&lt;/h1&gt;
&lt;p&gt;运维都知道的文件，若想把mount的disk和dir设置为每次开机自动加载，那么就要把相关信息写到这个文件中。当用”mount -a“命令自动mount的时候，也会去读这个文件。例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;LABEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/hadoop/9 /hadoop/9 ext3 defaults,noatime,nodiratime,noauto &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;LABEL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/hadoop/10 /hadoop/10 ext3 defaults,noatime,nodiratime,noauto &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;/etc/mtab&lt;/h1&gt;
&lt;p&gt;这个文件主要是用mount命令的时候，系统根据实际mount的情况生成的数据，例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;/dev/sdb1 /hadoop/9 ext3 rw,noatime,nodiratime &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;/dev/sdc1 /hadoop/10 ext3 rw,noatime,nodiratime &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;/proc/mounts&lt;/h1&gt;
&lt;p&gt;这个文件是/proc/self/mounts的软链接，/proc下面的文件都是保存在内存中的，是内核自动生成的。所以/proc/mounts比/etc/mtab文件能更加真实的反映当前mount的情况&lt;/p&gt;
&lt;h1&gt;场景应用：&lt;/h1&gt;
&lt;p&gt;服务器中有一块盘因为有坏道，被umount了，通过"df -h"就查看不到这块盘的信息了。
或者你使用"chmod 000 /dir",把这块盘设为不能读不能写。
这时如果你管理了1000台服务器，你需要知道你的服务器中哪些盘是被umount了，你会怎么做？
这里分享一个SHELL脚本，可以给你提供思路：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt; check_disks &lt;span class="o"&gt;{&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;for&lt;/span&gt; m in &lt;span class="sb"&gt;`&lt;/span&gt;awk &lt;span class="s1"&gt;&amp;#39;$3~/ext3/ {printf&amp;quot; %s &amp;quot;,$2}&amp;#39;&lt;/span&gt; /etc/fstab&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nv"&gt;fsdev&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nv"&gt;fsdev&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;awk -v &lt;span class="nv"&gt;m&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$m&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;$2==m {print $1}&amp;#39;&lt;/span&gt; /proc/mounts&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -z &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$fsdev&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nv"&gt;msg_&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$msg_&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$m&lt;/span&gt;&lt;span class="s2"&gt;(u)&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;      &lt;span class="nv"&gt;msg_&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$msg_&lt;/span&gt;&lt;span class="s2"&gt;`awk -v m=&lt;/span&gt;&lt;span class="nv"&gt;$m&lt;/span&gt;&lt;span class="s2"&gt; &amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;==m { if ( &lt;/span&gt;&lt;span class="nv"&gt;$4&lt;/span&gt;&lt;span class="s2"&gt; ~ /^ro,/ ) {printf&amp;quot;&lt;/span&gt;%s&lt;span class="o"&gt;(&lt;/span&gt;ro&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;,&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt; } ; }&amp;#39; /proc/mounts`&amp;quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;done&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -z &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$msg_&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;disks ok&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$msg_&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;2&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;  &lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;脚本首先通过比较/etc/fstab和/proc/mounts中的不同之处，得到被umount的盘，然后再把ro(read only)的盘也分析出来。&lt;/p&gt;
&lt;h1&gt;挂载usb到指定位置&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;blkid usb &lt;span class="c1"&gt;#查看uuid&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 修改/etc/fstab&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nv"&gt;UUID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;54A3-36E3 /home/aData exfat defaults,uid&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;,gid&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1000&lt;/span&gt;,umask&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;022&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="linux"></category><category term="mount"></category></entry><entry><title>ssh安装与配置</title><link href="https://ghxdghxd.github.io/ssh.html" rel="alternate"></link><published>2014-11-03T00:20:00+08:00</published><updated>2018-01-13T11:01:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2014-11-03:/ssh.html</id><summary type="html">&lt;p&gt;ssh安装与配置&lt;/p&gt;</summary><content type="html">&lt;h1&gt;相关文档&lt;/h1&gt;
&lt;h2&gt;SSH安装&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 备份&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;sudo cp -rf /etc/ssh /etc/ssh_bak&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#下载&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;wget http://mirror.internode.on.net/pub/OpenBSD/OpenSSH/portable/openssh-7.5p1.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#解压&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;tar xvf openssh-7.5p1.tar.gz&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; openssh-7.5p1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#编译,安装到/opt，配置保存到/etc/ssh&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;./configure --prefix&lt;span class="o"&gt;=&lt;/span&gt;/opt/openssh-7.5p1 --sysconfdir&lt;span class="o"&gt;=&lt;/span&gt;/etc/ssh --with-pam --with-zlib --with-md5-passwords&lt;/span&gt;
&lt;span class="code-line"&gt;make&lt;/span&gt;
&lt;span class="code-line"&gt;make install&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service sshd reload&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#或&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;service sshd restart&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#开机启动&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;chkconfig sshd on&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;1. 关于SSH Server的整体设定，包含使用的port以及使用的密码演算方式&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;Port &lt;span class="m"&gt;22&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#SSH预设使用22这个port，重复使用port使用多个端口&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Protocol &lt;span class="m"&gt;2&lt;/span&gt;,1&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 选择的SSH协议版本，可以是1也可以是2，&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 如果要同时支持两者，就必须要使用 2,1 这个分隔了！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;ListenAddress &lt;span class="m"&gt;192&lt;/span&gt;.168.0.100&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 只监听来自 192.168.0.100 这个 IP 的SSH联机。&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 如果不使用设定的话，则预设所有接口均接受 SSH&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;PidFile /var/run/sshd.pid&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 可以放置 SSHD 这个 PID 的档案！左列为默认值&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;LoginGraceTime &lt;span class="m"&gt;600&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 当使用者连上 SSH server 之后，会出现输入密码的画面，&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 在该画面中，在多久时间内没有成功连上 SSH server ，&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 就断线！时间为秒！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;Compression yes&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 是否可以使用压缩指令？当然可以啰！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2. 说明主机的 Private Key 放置的档案，预设使用下面的档案即可！&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;HostKey /etc/ssh/ssh_host_key　　　　&lt;span class="c1"&gt;# SSH version 1 使用的私钥&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;HostKey /etc/ssh/ssh_host_rsa_key　　&lt;span class="c1"&gt;# SSH version 2 使用的 RSA 私钥&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;HostKey /etc/ssh/ssh_host_dsa_key　　&lt;span class="c1"&gt;# SSH version 2 使用的 DSA 私钥&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;2.1 关于 version 1 的一些设定！&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;KeyRegenerationInterval &lt;span class="m"&gt;3600&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# 由前面联机的说明可以知道， version 1 会使用 server 的 Public Key ，那么如果这个 Public Key 被偷的话，岂不完蛋？所以需要每隔一段时间来重新建立一次！这里的时间为秒！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;ServerKeyBits &lt;span class="m"&gt;768&lt;/span&gt; 　　 &lt;span class="c1"&gt;# 没错！这个就是 Server key 的长度！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;3. 关于登录文件的讯息数据放置与 daemon 的名称！&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;SyslogFacility AUTH　　　　　　　　　&lt;span class="c1"&gt;# 当有人使用 SSH 登入系统的时候，SSH会记录资讯，这个信息要记录在什么 daemon name 底下？预设是以 AUTH 来设定的，即是 /var/log/secure 里面！什么？忘记了！回到 Linux 基础去翻一下其它可用的 daemon name 为：DAEMON,USER,AUTH,LOCAL0,LOCAL1,LOCAL2,LOCAL3,LOCAL4,LOCAL5,&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;LogLevel INFO　　&lt;span class="c1"&gt;# 登录记录的等级！嘿嘿！任何讯息！同样的，忘记了就回去参考！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;4. 安全设定项目！极重要！&lt;/h3&gt;
&lt;h4&gt;4.1 登入设定部分&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;PermitRootLogin no　　 　&lt;span class="c1"&gt;# 是否允许 root 登入！预设是允许的，但是建议设定成 no！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;UserLogin no　　　　　　　&lt;span class="c1"&gt;# 在 SSH 底下本来就不接受 login 这个程序的登入！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;StrictModes yes　　　　　　&lt;span class="c1"&gt;# 当使用者的 host key 改变之后，Server 就不接受联机，&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;　　　　　　　　　　　　　 &lt;span class="c1"&gt;# 可以抵挡部分的木马程序！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;# RSAAuthentication yes　　 # 是否使用纯的 RSA 认证！？仅针对 version 1 ！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;PubkeyAuthentication yes　 &lt;span class="c1"&gt;# 是否允许 Public Key ？当然允许啦！只有 version 2&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;AuthorizedKeysFile  .ssh/authorized_keys&lt;/span&gt;
&lt;span class="code-line"&gt;　　　　　　　　　　　　　 &lt;span class="c1"&gt;# 上面这个在设定若要使用不需要密码登入的账号时，那么那个账号的存放档案所在档名！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4.2 认证部分&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;RhostsAuthentication no　　&lt;span class="c1"&gt;# 本机系统不止使用 .rhosts ，因为仅使用 .rhosts 太不安全了，所以这里一定要设定为 no ！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;IgnoreRhosts yes　　　　　 &lt;span class="c1"&gt;# 是否取消使用 ~/.ssh/.rhosts 来做为认证！当然是！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;RhostsRSAAuthentication no &lt;span class="c1"&gt;# 这个选项是专门给 version 1 用的，使用 rhosts 档案在 /etc/hosts.equiv配合 RSA 演算方式来进行认证！不要使用&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;HostbasedAuthentication no &lt;span class="c1"&gt;# 这个项目与上面的项目类似，不过是给 version 2 使用的！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;IgnoreUserKnownHosts no　　&lt;span class="c1"&gt;# 是否忽略家目录内的 ~/.ssh/known_hosts 这个档案所记录的主机内容？当然不要忽略，所以这里就是 no 啦！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;PasswordAuthentication yes &lt;span class="c1"&gt;# 密码验证当然是需要的！所以这里写 yes 啰！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;PermitEmptyPasswords no　　&lt;span class="c1"&gt;# 若上面那一项如果设定为 yes 的话，这一项就最好设定为 no ，这个项目在是否允许以空的密码登入！当然不许！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;ChallengeResponseAuthentication yes  &lt;span class="c1"&gt;# 挑战任何的密码认证！所以，任何 login.conf规定的认证方式，均可适用！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#PAMAuthenticationViaKbdInt yes      # 是否启用其它的 PAM 模块！启用这个模块将会导致 PasswordAuthentication 设定失效！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4.3 与 Kerberos 有关的参数设定！因为我们没有 Kerberos 主机，所以底下不用设定！&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#KerberosAuthentication no&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#KerberosOrLocalPasswd yes&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#KerberosTicketCleanup yes&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#KerberosTgtPassing no&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4.4 底下是有关在 X-Window 底下使用的相关设定！&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;X11Forwarding yes&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#X11DisplayOffset 10&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="c1"&gt;#X11UseLocalhost yes&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4.5 登入后的项目：&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;PrintMotd no              &lt;span class="c1"&gt;# 登入后是否显示出一些信息呢？例如上次登入的时间、地点等等，预设是 yes ，但是，如果为了安全，可以考虑改为 no ！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;PrintLastLog yes　　　　　&lt;span class="c1"&gt;# 显示上次登入的信息！可以啊！预设也是 yes ！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;KeepAlive yes　　　　　　 &lt;span class="c1"&gt;# 一般而言，如果设定这项目的话，那么 SSH Server 会传送 KeepAlive 的讯息给 Client 端，以确保两者的联机正常！在这个情况下，任何一端死掉后， SSH 可以立刻知道！而不会有僵尸程序的发生！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;UsePrivilegeSeparation yes &lt;span class="c1"&gt;# 使用者的权限设定项目！就设定为 yes 吧！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;MaxStartups &lt;span class="m"&gt;10&lt;/span&gt;　　　　　　&lt;span class="c1"&gt;# 同时允许几个尚未登入的联机画面？当我们连上 SSH ，但是尚未输入密码时，这个时候就是我们所谓的联机画面啦！在这个联机画面中，为了保护主机，所以需要设定最大值，预设最多十个联机画面，而已经建立联机的不计算在这十个当中&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;4.6 关于使用者抵挡的设定项目：&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;DenyUsers *　　　　　　　 &lt;span class="c1"&gt;# 设定受抵挡的使用者名称，如果是全部的使用者，那就是全部&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;　　　　　　　　　　　　　&lt;span class="c1"&gt;# 挡吧！若是部分使用者，可以将该账号填入！例如下列！&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;DenyUsers &lt;span class="nb"&gt;test&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;DenyGroups &lt;span class="nb"&gt;test&lt;/span&gt;　　　　　 &lt;span class="c1"&gt;# 与 DenyUsers 相同！仅抵挡几个群组而已！&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;5. 关于 SFTP 服务的设定项目！&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;Subsystem       sftp    /usr/lib/ssh/sftp-server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="ssh"></category><category term="linux"></category></entry><entry><title>前端</title><link href="https://ghxdghxd.github.io/css.html" rel="alternate"></link><published>2010-12-03T10:20:00+08:00</published><updated>2010-12-05T19:30:00+08:00</updated><author><name>JT Guo</name></author><id>tag:ghxdghxd.github.io,2010-12-03:/css.html</id><summary type="html">&lt;p&gt;前端的记录&lt;/p&gt;</summary><content type="html">&lt;h1&gt;css + js + html&lt;/h1&gt;
&lt;h2&gt;垂直居中&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="code-line"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;display&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;flex&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;justify-content&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;center&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class="code-line"&gt;&lt;span class="nt"&gt;align-items&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nt"&gt;center&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="css"></category><category term="js"></category><category term="html"></category></entry></feed>